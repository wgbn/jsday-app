!function(){"use strict";function e(e,t,a){function o(e){return a.parseShortDateToStr(e)}function n(){e.palestras=t.getPalestras()}e.parseDateToStr=o,n()}angular.module("jsday").controller("HomeCtrl",e),e.$inject=["$scope","fireService","Utils"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,c,s,l){function u(){c.getLocalStorage(o.key)?(e.rate.avaliacao=c.getLocalStorage(o.key),s.show("Você já avaliou esta palestra.","bottom",!1,2500)):(e.palestra.avaliacao+=e.rate.avaliacao,i.updatePalestra(e.palestra,"avaliacao"),c.setLocalStorage(o.key,e.rate.avaliacao))}function m(){a.go("home")}function p(t,a){a.palestra==e.key&&d()}function d(){l.getByPalestra(e.key).then(function(t){e.notas=t})}function f(){var t=new Date;if(e.palestra.hora<=t.getTime()){n.show({template:'<input type="text" ng-model="comentario.nome" placeholder="Seu nome..." class="com-input"><input type="text" ng-model="comentario.email" placeholder="Seu e-mail..." class="com-input"><textarea ng-model="comentario.texto" placeholder="Comentário..." class="com-text"></textarea>',title:"Faça um comentário",subTitle:"Deixe aqui sua opinião sobre esta palestra",scope:e,buttons:[{text:"Cancelar"},{text:"<b>OK</b>",type:"button-energized",onTap:function(t){return e.comentario.nome&&e.comentario.email&&e.comentario.texto?(e.comentarios=i.addComentario(e.palestra,e.comentario),e.comentario={},!0):(t.preventDefault(),void s.show("Preencha todos os espaços.","bottom",!1,1500))}}]})}else s.show("Você só poderá comengar após o início da palestra.","bottom",!1,2500)}function g(a){r.show({destructiveText:"Excluir",titleText:"O que deseja fazer?",cancelText:"Cancel",cssClass:"sheets",cancel:function(){},buttonClicked:function(e){return!0},destructiveButtonClicked:function(){return l.remove(a).then(function(){t.$broadcast("notaAdded",{palestra:e.key})}),!0}})}function h(){var t=new Date;return t.getTime()>=e.palestra.hora}e.key=o.key,e.palestra=i.getPalestra(o.key),e.rate={},e.rate.avaliacao=c.getLocalStorage(o.key)?c.getLocalStorage(o.key):0,e.rate.max=5,e.notas=[],e.btnComentario=!1,e.comentario={},e.comentarios=i.getComentarios(e.palestra),e.showSlides=h(),e.rateClick=u,e.btnVoltar=m,e.addClick=f,e.onHoldNota=g,e.$on("notaAdded",p),d()}angular.module("jsday").controller("PalestraCtrl",e),e.$inject=["$scope","$rootScope","$state","$stateParams","$ionicPopup","$ionicActionSheet","fireService","Utils","ionicToast","noteService"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvbWVDb250cm9sbGVyLmpzIiwicGFsZXN0cmFDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkhvbWVDdHJsIiwiJHNjb3BlIiwiZmlyZVNlcnZpY2UiLCJVdGlscyIsIl9wYXJzZURhdGVUb1N0ciIsIl9kYXRhIiwicGFyc2VTaG9ydERhdGVUb1N0ciIsIl9jYXJyZWdhUGFsZXN0cmFzIiwicGFsZXN0cmFzIiwiZ2V0UGFsZXN0cmFzIiwicGFyc2VEYXRlVG9TdHIiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRpbmplY3QiLCJQYWxlc3RyYUN0cmwiLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiJHN0YXRlUGFyYW1zIiwiJGlvbmljUG9wdXAiLCIkaW9uaWNBY3Rpb25TaGVldCIsImlvbmljVG9hc3QiLCJub3RlU2VydmljZSIsIl9yYXRlQ2xpY2siLCJnZXRMb2NhbFN0b3JhZ2UiLCJrZXkiLCJyYXRlIiwiYXZhbGlhY2FvIiwic2hvdyIsInBhbGVzdHJhIiwidXBkYXRlUGFsZXN0cmEiLCJzZXRMb2NhbFN0b3JhZ2UiLCJfYnRuVm9sdGFyIiwiZ28iLCJfbm90YUFkZGVkIiwiZSIsImRhdGEiLCJfZ2V0Tm90YXMiLCJnZXRCeVBhbGVzdHJhIiwidGhlbiIsInJlc3VsdHMiLCJub3RhcyIsIl9hZGRDbGljayIsIl9ob2plIiwiRGF0ZSIsImhvcmEiLCJnZXRUaW1lIiwidGVtcGxhdGUiLCJ0aXRsZSIsInN1YlRpdGxlIiwic2NvcGUiLCJidXR0b25zIiwidGV4dCIsInR5cGUiLCJvblRhcCIsImNvbWVudGFyaW8iLCJub21lIiwiZW1haWwiLCJ0ZXh0byIsImNvbWVudGFyaW9zIiwiYWRkQ29tZW50YXJpbyIsInByZXZlbnREZWZhdWx0IiwiX29uSG9sZE5vdGEiLCJfaWQiLCJkZXN0cnVjdGl2ZVRleHQiLCJ0aXRsZVRleHQiLCJjYW5jZWxUZXh0IiwiY3NzQ2xhc3MiLCJjYW5jZWwiLCJidXR0b25DbGlja2VkIiwiaW5kZXgiLCJkZXN0cnVjdGl2ZUJ1dHRvbkNsaWNrZWQiLCJyZW1vdmUiLCIkYnJvYWRjYXN0IiwiX3Nob3dTbGlkZXMiLCJnZXRQYWxlc3RyYSIsIm1heCIsImJ0bkNvbWVudGFyaW8iLCJnZXRDb21lbnRhcmlvcyIsInNob3dTbGlkZXMiLCJyYXRlQ2xpY2siLCJidG5Wb2x0YXIiLCJhZGRDbGljayIsIm9uSG9sZE5vdGEiLCIkb24iXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFzQkEsU0FBQUEsR0FBQUMsRUFBQUMsRUFBQUMsR0FlQSxRQUFBQyxHQUFBQyxHQUNBLE1BQUFGLEdBQUFHLG9CQUFBRCxHQVNBLFFBQUFFLEtBQ0FOLEVBQUFPLFVBQUFOLEVBQUFPLGVBekJBUixFQUFBUyxlQUFBTixFQUVBRyxJQWpCQUksUUFDQUMsT0FBQSxTQUNBQyxXQUFBLFdBQUFiLEdBRUFBLEVBQUFjLFNBQUEsU0FBQSxjQUFBLFlDYkEsV0FDQSxZQXFDQSxTQUFBQyxHQUFBZCxFQUFBZSxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBbEIsRUFBQUMsRUFBQWtCLEVBQUFDLEdBNkJBLFFBQUFDLEtBQ0FwQixFQUFBcUIsZ0JBQUFOLEVBQUFPLE1BS0F4QixFQUFBeUIsS0FBQUMsVUFBQXhCLEVBQUFxQixnQkFBQU4sRUFBQU8sS0FDQUosRUFBQU8sS0FBQSxpQ0FBQSxVQUFBLEVBQUEsUUFMQTNCLEVBQUE0QixTQUFBRixXQUFBMUIsRUFBQXlCLEtBQUFDLFVBQ0F6QixFQUFBNEIsZUFBQTdCLEVBQUE0QixTQUFBLGFBQ0ExQixFQUFBNEIsZ0JBQUFiLEVBQUFPLElBQUF4QixFQUFBeUIsS0FBQUMsWUFhQSxRQUFBSyxLQUNBZixFQUFBZ0IsR0FBQSxRQVdBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQ0FBLEVBQUFQLFVBQUE1QixFQUFBd0IsS0FDQVksSUFTQSxRQUFBQSxLQUNBZixFQUFBZ0IsY0FBQXJDLEVBQUF3QixLQUFBYyxLQUFBLFNBQUFDLEdBQ0F2QyxFQUFBd0MsTUFBQUQsSUFTQSxRQUFBRSxLQUNBLEdBQUFDLEdBQUEsR0FBQUMsS0FFQSxJQUFBM0MsRUFBQTRCLFNBQUFnQixNQUFBRixFQUFBRyxVQUVBLENBQUEzQixFQUFBUyxNQUNBbUIsU0FBQSx3UkFHQUMsTUFBQSxxQkFDQUMsU0FBQSw2Q0FDQUMsTUFBQWpELEVBQ0FrRCxVQUVBQyxLQUFBLGFBR0FBLEtBQUEsWUFDQUMsS0FBQSxtQkFDQUMsTUFBQSxTQUFBbkIsR0FDQSxNQUFBbEMsR0FBQXNELFdBQUFDLE1BQUF2RCxFQUFBc0QsV0FBQUUsT0FBQXhELEVBQUFzRCxXQUFBRyxPQUlBekQsRUFBQTBELFlBQUF6RCxFQUFBMEQsY0FBQTNELEVBQUE0QixTQUFBNUIsRUFBQXNELFlBQ0F0RCxFQUFBc0QsZUFDQSxJQUxBcEIsRUFBQTBCLHFCQUNBeEMsR0FBQU8sS0FBQSw2QkFBQSxVQUFBLEVBQUEsZ0JBa0JBUCxHQUFBTyxLQUFBLHFEQUFBLFVBQUEsRUFBQSxNQVNBLFFBQUFrQyxHQUFBQyxHQUNBM0MsRUFBQVEsTUFDQW9DLGdCQUFBLFVBQ0FDLFVBQUEsc0JBQ0FDLFdBQUEsU0FDQUMsU0FBQSxTQUNBQyxPQUFBLGFBR0FDLGNBQUEsU0FBQUMsR0FDQSxPQUFBLEdBRUFDLHlCQUFBLFdBS0EsTUFKQWpELEdBQUFrRCxPQUFBVCxHQUNBeEIsS0FBQSxXQUNBdkIsRUFBQXlELFdBQUEsYUFBQTVDLFNBQUE1QixFQUFBd0IsU0FFQSxLQVdBLFFBQUFpRCxLQUNBLEdBQUEvQixHQUFBLEdBQUFDLEtBQ0EsT0FBQUQsR0FBQUcsV0FBQTdDLEVBQUE0QixTQUFBZ0IsS0E3SkE1QyxFQUFBd0IsSUFBQVAsRUFBQU8sSUFDQXhCLEVBQUE0QixTQUFBM0IsRUFBQXlFLFlBQUF6RCxFQUFBTyxLQUNBeEIsRUFBQXlCLFFBQ0F6QixFQUFBeUIsS0FBQUMsVUFBQXhCLEVBQUFxQixnQkFBQU4sRUFBQU8sS0FBQXRCLEVBQUFxQixnQkFBQU4sRUFBQU8sS0FBQSxFQUNBeEIsRUFBQXlCLEtBQUFrRCxJQUFBLEVBQ0EzRSxFQUFBd0MsU0FDQXhDLEVBQUE0RSxlQUFBLEVBQ0E1RSxFQUFBc0QsY0FDQXRELEVBQUEwRCxZQUFBekQsRUFBQTRFLGVBQUE3RSxFQUFBNEIsVUFDQTVCLEVBQUE4RSxXQUFBTCxJQUVBekUsRUFBQStFLFVBQUF6RCxFQUNBdEIsRUFBQWdGLFVBQUFqRCxFQUNBL0IsRUFBQWlGLFNBQUF4QyxFQUNBekMsRUFBQWtGLFdBQUFyQixFQUNBN0QsRUFBQW1GLElBQUEsWUFBQWxELEdBRUFHLElBaERBMUIsUUFDQUMsT0FBQSxTQUNBQyxXQUFBLGVBQUFFLEdBRUFBLEVBQUFELFNBQ0EsU0FDQSxhQUNBLFNBQ0EsZUFDQSxjQUNBLG9CQUNBLGNBQ0EsUUFDQSxhQUNBIiwiZmlsZSI6ImNvbnRyb2xsZXJzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gQ29udHJvbGxlciBIb21lXG4gICAgICogQGF1dGhvciBXYWx0ZXIgR2FuZGFyZWxsYSA8d2FsdGVyLndnYm5AZ21haWwuY29tPlxuICAgICAqIEBtZW1iZXJvZiBqc2RheVxuICAgICAqIEB2ZXJzaW9uIDEuMC4wXG4gICAgICovXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdqc2RheScpXG4gICAgICAgIC5jb250cm9sbGVyKCdIb21lQ3RybCcsIEhvbWVDdHJsKTtcblxuICAgIEhvbWVDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICdmaXJlU2VydmljZScsICdVdGlscyddO1xuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIGpzZGF5XG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcbiAgICAgKiBAbmFtZSBIb21lQ3RybFxuICAgICAqIEBwYXJhbSAkc2NvcGUge3NlcnZpY2V9ICAgICAgICAgIENvbnRyb2xsZXIgc2NvcGVcbiAgICAgKiBAcGFyYW0gZmlyZVNlcnZpY2Uge2ZhY3Rvcnl9ICAgICBGaXJlYmFzZSBzZXJ2aWNlXG4gICAgICogQHBhcmFtIFV0aWxzIHtmYWN0b3J5fSAgICAgICAgICAgRnVuw6fDtWVzIHV0aWxpdMOhcmlhc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIEhvbWVDdHJsKCRzY29wZSwgZmlyZVNlcnZpY2UsIFV0aWxzKSB7XG4gICAgICAgICRzY29wZS5wYXJzZURhdGVUb1N0ciA9IF9wYXJzZURhdGVUb1N0cjtcblxuICAgICAgICBfY2FycmVnYVBhbGVzdHJhcygpO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZ1bsOnw6NvIHF1ZSBjb252ZXJ0ZSB1bWEgZGF0YVxuICAgICAgICAgKiBAbWVtYmVyb2YgSG9tZUN0cmxcbiAgICAgICAgICogQGZ1bmN0aW9uIF9wYXJzZURhdGVUb1N0clxuICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gX2RhdGEgICAgICAgIFRpbWVzdGFtcCBkYSBkYXRhIGEgc2VyIHJlc29sdmlkYVxuICAgICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSAgICAgICAgICAgIERhdGEgcGFyc2VhZGFcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9wYXJzZURhdGVUb1N0ciAoX2RhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBVdGlscy5wYXJzZVNob3J0RGF0ZVRvU3RyKF9kYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGdW7Dp8OjbyBxdWUgY2FycmVnYSBhIGxpc3RhIGRlIHBhbGVzdHJhcyBhIHBhcnRpciBkbyBzZXJ2aWNlIEZpcmViYXNlXG4gICAgICAgICAqIEBtZW1iZXJvZiBIb21lQ3RybFxuICAgICAgICAgKiBAZnVuY3Rpb24gX2NhcnJlZ2FQYWxlc3RyYXNcbiAgICAgICAgICogQHJldHVybnMge1Byb21pc2V9ICAgICAgICAgICBQcm9taXNlIGRhIGxpc3RhIGRlIHBhbGVzdHJhc1xuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX2NhcnJlZ2FQYWxlc3RyYXMgKCkge1xuICAgICAgICAgICAgJHNjb3BlLnBhbGVzdHJhcyA9IGZpcmVTZXJ2aWNlLmdldFBhbGVzdHJhcygpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIENvbnRyb2xsZXIgUGFsZXN0cmFcbiAgICAgKiBAYXV0aG9yIFdhbHRlciBHYW5kYXJlbGxhIDx3YWx0ZXIud2dibkBnbWFpbC5jb20+XG4gICAgICogQG1lbWJlcm9mIGpzZGF5XG4gICAgICogQHZlcnNpb24gMS4wLjBcbiAgICAgKi9cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2pzZGF5JylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1BhbGVzdHJhQ3RybCcsIFBhbGVzdHJhQ3RybCk7XG5cbiAgICBQYWxlc3RyYUN0cmwuJGluamVjdCA9IFtcbiAgICAgICAgJyRzY29wZScsXG4gICAgICAgICckcm9vdFNjb3BlJyxcbiAgICAgICAgJyRzdGF0ZScsXG4gICAgICAgICckc3RhdGVQYXJhbXMnLFxuICAgICAgICAnJGlvbmljUG9wdXAnLFxuICAgICAgICAnJGlvbmljQWN0aW9uU2hlZXQnLFxuICAgICAgICAnZmlyZVNlcnZpY2UnLFxuICAgICAgICAnVXRpbHMnLFxuICAgICAgICAnaW9uaWNUb2FzdCcsXG4gICAgICAgICdub3RlU2VydmljZSdcbiAgICBdO1xuXG4gICAgLyoqXG4gICAgICogQG1lbWJlcm9mIGpzZGF5XG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcbiAgICAgKiBAbmFtZSBQYWxlc3RyYUN0cmxcbiAgICAgKiBAcGFyYW0gJHNjb3BlIHtzZXJ2aWNlfSAgICAgICAgICBDb250cm9sbGVyIHNjb3BlXG4gICAgICogQHBhcmFtICRzdGF0ZSB7cHJvdmlkZXJ9ICAgICAgICAgU3RhdGUgcHJvdmlkZXJcbiAgICAgKiBAcGFyYW0gJHN0YXRlUGFyYW1zIHtwcm92aWRlcn0gICBTdGF0ZSBwYXJhbXNcbiAgICAgKiBAcGFyYW0gZmlyZVNlcnZpY2Uge2ZhY3Rvcnl9ICAgICBGaXJlYmFzZSBzZXJ2aWNlXG4gICAgICogQHBhcmFtIFV0aWxzIHtmYWN0b3J5fSAgICAgICAgICAgRnVuw6fDtWVzIHV0aWxpdMOhcmlhc1xuICAgICAqIEBwYXJhbSBpb25pY1RvYXN0IHtwcm92aWRlcn0gICAgIFRvYXN0IHByb3ZpZGVyXG4gICAgICogQHBhcmFtIG5vdGVTZXJ2aWNlIHtzZXJ2aWNlfSAgICAgU2VydmnDp28gZGUgcGVyc2lzdGVuY2lhIGRlIG5vdGFzXG4gICAgICovXG4gICAgZnVuY3Rpb24gUGFsZXN0cmFDdHJsKCRzY29wZSwgJHJvb3RTY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRpb25pY1BvcHVwLCAkaW9uaWNBY3Rpb25TaGVldCwgZmlyZVNlcnZpY2UsIFV0aWxzLCBpb25pY1RvYXN0LCBub3RlU2VydmljZSkge1xuXG4gICAgICAgICRzY29wZS5rZXkgPSAkc3RhdGVQYXJhbXMua2V5O1xuICAgICAgICAkc2NvcGUucGFsZXN0cmEgPSBmaXJlU2VydmljZS5nZXRQYWxlc3RyYSgkc3RhdGVQYXJhbXMua2V5KTtcbiAgICAgICAgJHNjb3BlLnJhdGUgPSB7fTtcbiAgICAgICAgJHNjb3BlLnJhdGUuYXZhbGlhY2FvID0gVXRpbHMuZ2V0TG9jYWxTdG9yYWdlKCRzdGF0ZVBhcmFtcy5rZXkpID8gVXRpbHMuZ2V0TG9jYWxTdG9yYWdlKCRzdGF0ZVBhcmFtcy5rZXkpIDogMDtcbiAgICAgICAgJHNjb3BlLnJhdGUubWF4ID0gNTtcbiAgICAgICAgJHNjb3BlLm5vdGFzID0gW107XG4gICAgICAgICRzY29wZS5idG5Db21lbnRhcmlvID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5jb21lbnRhcmlvID0ge307XG4gICAgICAgICRzY29wZS5jb21lbnRhcmlvcyA9IGZpcmVTZXJ2aWNlLmdldENvbWVudGFyaW9zKCRzY29wZS5wYWxlc3RyYSk7XG4gICAgICAgICRzY29wZS5zaG93U2xpZGVzID0gX3Nob3dTbGlkZXMoKTtcblxuICAgICAgICAkc2NvcGUucmF0ZUNsaWNrID0gX3JhdGVDbGljaztcbiAgICAgICAgJHNjb3BlLmJ0blZvbHRhciA9IF9idG5Wb2x0YXI7XG4gICAgICAgICRzY29wZS5hZGRDbGljayA9IF9hZGRDbGljaztcbiAgICAgICAgJHNjb3BlLm9uSG9sZE5vdGEgPSBfb25Ib2xkTm90YTtcbiAgICAgICAgJHNjb3BlLiRvbignbm90YUFkZGVkJywgX25vdGFBZGRlZCk7XG5cbiAgICAgICAgX2dldE5vdGFzKCk7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZ1bsOnw6NvIHF1ZSBjYXB0dXJhIG8gY2xpcXVlIG5hIGRpcmV0aXZhIGRlIGF2YWxpYcOnw6NvIGUgc2FsdmEgbyB2b3RvIGRvIHVzdcOhcmlvXG4gICAgICAgICAqIEBtZW1iZXJvZiBQYWxlc3RyYUN0cmxcbiAgICAgICAgICogQGZ1bmN0aW9uIF9yYXRlQ2xpY2tcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9yYXRlQ2xpY2sgKCkge1xuICAgICAgICAgICAgaWYgKCFVdGlscy5nZXRMb2NhbFN0b3JhZ2UoJHN0YXRlUGFyYW1zLmtleSkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFsZXN0cmEuYXZhbGlhY2FvICs9ICRzY29wZS5yYXRlLmF2YWxpYWNhbztcbiAgICAgICAgICAgICAgICBmaXJlU2VydmljZS51cGRhdGVQYWxlc3RyYSgkc2NvcGUucGFsZXN0cmEsICdhdmFsaWFjYW8nKTtcbiAgICAgICAgICAgICAgICBVdGlscy5zZXRMb2NhbFN0b3JhZ2UoJHN0YXRlUGFyYW1zLmtleSwgJHNjb3BlLnJhdGUuYXZhbGlhY2FvKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJhdGUuYXZhbGlhY2FvID0gVXRpbHMuZ2V0TG9jYWxTdG9yYWdlKCRzdGF0ZVBhcmFtcy5rZXkpO1xuICAgICAgICAgICAgICAgIGlvbmljVG9hc3Quc2hvdygnVm9jw6ogasOhIGF2YWxpb3UgZXN0YSBwYWxlc3RyYS4nLCAnYm90dG9tJywgZmFsc2UsIDI1MDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZ1bsOnw6NvIHF1ZSBjYXB0dXJhIG8gYm90w6NvIHZvbHRhciBlIGRpcmVjaW9uYSBwYXJhIHRlbGEgSG9tZVxuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfYnRuVm9sdGFyXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfYnRuVm9sdGFyICgpIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZ1bsOnw6NvIHF1ZSBlc2N1dGEgbyBldmVudG8gbm90YUFkZGVkIGUgYXR1YWxpemEgYXMgbm90YXMgbmEgdGVsYVxuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfbm90YUFkZGVkXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBlICAgICAgICBFdmVudCBvYmplY3RcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgICAgIERhdGEgcmVzdWx0IG9iamVjdFxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX25vdGFBZGRlZCAoZSwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEucGFsZXN0cmEgPT0gJHNjb3BlLmtleSlcbiAgICAgICAgICAgICAgICBfZ2V0Tm90YXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGdW7Dp8OjbyBxdWUgY29uc3VsdGEgbyBzZXJ2aWNlIGRlIE5vdGFzIGUgYXR1YWxpemEgYSBsaXN0YSBkZSBub3Rhc1xuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBnZXROb3Rhc1xuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX2dldE5vdGFzKCkge1xuICAgICAgICAgICAgbm90ZVNlcnZpY2UuZ2V0QnlQYWxlc3RyYSgkc2NvcGUua2V5KS50aGVuKGZ1bmN0aW9uKHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubm90YXMgPSByZXN1bHRzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQm90w6NvIHF1ZSBhZGljaW9uYSB1bSBjb21lbnTDoXJpbyDDoCBwYWxlc3RyYVxuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfYWRkQ2xpY2tcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9hZGRDbGljayAoKSB7XG4gICAgICAgICAgICB2YXIgX2hvamUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnBhbGVzdHJhLmhvcmEgPD0gX2hvamUuZ2V0VGltZSgpKXtcblxuICAgICAgICAgICAgICAgIHZhciBjb21Qb3B1cCA9ICRpb25pY1BvcHVwLnNob3coe1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiY29tZW50YXJpby5ub21lXCIgcGxhY2Vob2xkZXI9XCJTZXUgbm9tZS4uLlwiIGNsYXNzPVwiY29tLWlucHV0XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICc8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImNvbWVudGFyaW8uZW1haWxcIiBwbGFjZWhvbGRlcj1cIlNldSBlLW1haWwuLi5cIiBjbGFzcz1cImNvbS1pbnB1dFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPHRleHRhcmVhIG5nLW1vZGVsPVwiY29tZW50YXJpby50ZXh0b1wiIHBsYWNlaG9sZGVyPVwiQ29tZW50w6FyaW8uLi5cIiBjbGFzcz1cImNvbS10ZXh0XCI+PC90ZXh0YXJlYT4nLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0Zhw6dhIHVtIGNvbWVudMOhcmlvJyxcbiAgICAgICAgICAgICAgICAgICAgc3ViVGl0bGU6ICdEZWl4ZSBhcXVpIHN1YSBvcGluacOjbyBzb2JyZSBlc3RhIHBhbGVzdHJhJyxcbiAgICAgICAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdDYW5jZWxhcidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJzxiPk9LPC9iPicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2J1dHRvbi1lbmVyZ2l6ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVGFwOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmNvbWVudGFyaW8ubm9tZSB8fCAhJHNjb3BlLmNvbWVudGFyaW8uZW1haWwgfHwgISRzY29wZS5jb21lbnRhcmlvLnRleHRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpb25pY1RvYXN0LnNob3coJ1ByZWVuY2hhIHRvZG9zIG9zIGVzcGHDp29zLicsICdib3R0b20nLCBmYWxzZSwgMTUwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29tZW50YXJpb3MgPSBmaXJlU2VydmljZS5hZGRDb21lbnRhcmlvKCRzY29wZS5wYWxlc3RyYSwgJHNjb3BlLmNvbWVudGFyaW8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbWVudGFyaW8gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvKmNvbVBvcHVwLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jb21lbnRhcmlvcyA9IGZpcmVTZXJ2aWNlLmFkZENvbWVudGFyaW8oJHNjb3BlLnBhbGVzdHJhLCByZXMpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCdjYW5jZWwnKTtcbiAgICAgICAgICAgICAgICB9KTsqL1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlvbmljVG9hc3Quc2hvdygnVm9jw6ogc8OzIHBvZGVyw6EgY29tZW5nYXIgYXDDs3MgbyBpbsOtY2lvIGRhIHBhbGVzdHJhLicsICdib3R0b20nLCBmYWxzZSwgMjUwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQcOnw6NvIGV4ZWN1dGFkYSBhbyBzZWd1cmFyIGVtIGNpbWEgZGUgdW1hIG5vdGFcbiAgICAgICAgICogQG1lbWJlcm9mIFBhbGVzdHJhQ3RybFxuICAgICAgICAgKiBAZnVuY3Rpb24gX29uSG9sZE5vdGFcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9vbkhvbGROb3RhIChfaWQpIHtcbiAgICAgICAgICAgIHZhciBoaWRlU2hlZXQgPSAkaW9uaWNBY3Rpb25TaGVldC5zaG93KHtcbiAgICAgICAgICAgICAgICBkZXN0cnVjdGl2ZVRleHQ6ICdFeGNsdWlyJyxcbiAgICAgICAgICAgICAgICB0aXRsZVRleHQ6ICdPIHF1ZSBkZXNlamEgZmF6ZXI/JyxcbiAgICAgICAgICAgICAgICBjYW5jZWxUZXh0OiAnQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ3NoZWV0cycsXG4gICAgICAgICAgICAgICAgY2FuY2VsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGNhbmNlbCBjb2RlLi5cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJ1dHRvbkNsaWNrZWQ6IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVzdHJ1Y3RpdmVCdXR0b25DbGlja2VkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vdGVTZXJ2aWNlLnJlbW92ZShfaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdub3RhQWRkZWQnLCB7cGFsZXN0cmE6ICRzY29wZS5rZXl9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZXJpZmljYSBzZSBvIGJvdMOjbyBkZSBzbGlkZXMgcG9kZSBzZXIgZXhpYmlkb1xuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfc2hvd1NsaWRlc1xuICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9zaG93U2xpZGVzICgpIHtcbiAgICAgICAgICAgIHZhciBfaG9qZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gX2hvamUuZ2V0VGltZSgpID49ICRzY29wZS5wYWxlc3RyYS5ob3JhO1xuICAgICAgICB9XG5cbiAgICB9XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
