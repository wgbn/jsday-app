!function(){"use strict";function e(e,t,a){function o(e){return a.parseShortDateToStr(e)}function n(){e.palestras=t.getPalestras()}e.parseDateToStr=o,n()}angular.module("jsday").controller("HomeCtrl",e),e.$inject=["$scope","fireService","Utils"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,c,s,l){function u(){c.getLocalStorage(o.key)?(e.rate.avaliacao=c.getLocalStorage(o.key),s.show("Você já avaliou esta palestra.","bottom",!1,2500)):(e.palestra.avaliacao+=e.rate.avaliacao,i.updatePalestra(e.palestra,"avaliacao"),c.setLocalStorage(o.key,e.rate.avaliacao))}function m(){a.go("home")}function p(t,a){a.palestra==e.key&&d()}function d(){l.getByPalestra(e.key).then(function(t){e.notas=t})}function f(){var t=new Date;if(e.palestra.hora<=t.getTime()){n.show({template:'<input type="text" ng-model="comentario.nome" placeholder="Seu nome..." class="com-input"><input type="text" ng-model="comentario.email" placeholder="Seu e-mail..." class="com-input"><textarea ng-model="comentario.texto" placeholder="Comentário..." class="com-text"></textarea>',title:"Faça um comentário",subTitle:"Deixe aqui sua opinião sobre esta palestra",scope:e,buttons:[{text:"Cancelar"},{text:"<b>OK</b>",type:"button-energized",onTap:function(t){return e.comentario.nome&&e.comentario.email&&e.comentario.texto?(e.comentarios=i.addComentario(e.palestra,e.comentario),e.comentario={},!0):(t.preventDefault(),void s.show("Preencha todos os espaços.","bottom",!1,1500))}}]})}else s.show("Você só poderá comengar após o início da palestra.","bottom",!1,2500)}function g(a){r.show({destructiveText:"Excluir",titleText:"O que deseja fazer?",cancelText:"Cancel",cssClass:"sheets",cancel:function(){},buttonClicked:function(e){return!0},destructiveButtonClicked:function(){return l.remove(a).then(function(){t.$broadcast("notaAdded",{palestra:e.key})}),!0}})}function h(){var t=new Date;return t.getTime()>=e.palestra.hora&&e.palestra.slide}function v(e){var t=e.valor;"social-twitter"==e.tipo&&(t="http://twitter.com/"+t.replace("@","")),window.open(t,"_system")}e.key=o.key,e.palestra=i.getPalestra(o.key),e.rate={},e.rate.avaliacao=c.getLocalStorage(o.key)?c.getLocalStorage(o.key):0,e.rate.max=5,e.notas=[],e.btnComentario=!1,e.comentario={},e.comentarios=i.getComentarios(e.palestra),e.showSlides=h(),e.rateClick=u,e.btnVoltar=m,e.addClick=f,e.onHoldNota=g,e.goToUrl=v,e.$on("notaAdded",p),d()}angular.module("jsday").controller("PalestraCtrl",e),e.$inject=["$scope","$rootScope","$state","$stateParams","$ionicPopup","$ionicActionSheet","fireService","Utils","ionicToast","noteService"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvbWVDb250cm9sbGVyLmpzIiwicGFsZXN0cmFDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkhvbWVDdHJsIiwiJHNjb3BlIiwiZmlyZVNlcnZpY2UiLCJVdGlscyIsIl9wYXJzZURhdGVUb1N0ciIsIl9kYXRhIiwicGFyc2VTaG9ydERhdGVUb1N0ciIsIl9jYXJyZWdhUGFsZXN0cmFzIiwicGFsZXN0cmFzIiwiZ2V0UGFsZXN0cmFzIiwicGFyc2VEYXRlVG9TdHIiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRpbmplY3QiLCJQYWxlc3RyYUN0cmwiLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiJHN0YXRlUGFyYW1zIiwiJGlvbmljUG9wdXAiLCIkaW9uaWNBY3Rpb25TaGVldCIsImlvbmljVG9hc3QiLCJub3RlU2VydmljZSIsIl9yYXRlQ2xpY2siLCJnZXRMb2NhbFN0b3JhZ2UiLCJrZXkiLCJyYXRlIiwiYXZhbGlhY2FvIiwic2hvdyIsInBhbGVzdHJhIiwidXBkYXRlUGFsZXN0cmEiLCJzZXRMb2NhbFN0b3JhZ2UiLCJfYnRuVm9sdGFyIiwiZ28iLCJfbm90YUFkZGVkIiwiZSIsImRhdGEiLCJfZ2V0Tm90YXMiLCJnZXRCeVBhbGVzdHJhIiwidGhlbiIsInJlc3VsdHMiLCJub3RhcyIsIl9hZGRDbGljayIsIl9ob2plIiwiRGF0ZSIsImhvcmEiLCJnZXRUaW1lIiwidGVtcGxhdGUiLCJ0aXRsZSIsInN1YlRpdGxlIiwic2NvcGUiLCJidXR0b25zIiwidGV4dCIsInR5cGUiLCJvblRhcCIsImNvbWVudGFyaW8iLCJub21lIiwiZW1haWwiLCJ0ZXh0byIsImNvbWVudGFyaW9zIiwiYWRkQ29tZW50YXJpbyIsInByZXZlbnREZWZhdWx0IiwiX29uSG9sZE5vdGEiLCJfaWQiLCJkZXN0cnVjdGl2ZVRleHQiLCJ0aXRsZVRleHQiLCJjYW5jZWxUZXh0IiwiY3NzQ2xhc3MiLCJjYW5jZWwiLCJidXR0b25DbGlja2VkIiwiaW5kZXgiLCJkZXN0cnVjdGl2ZUJ1dHRvbkNsaWNrZWQiLCJyZW1vdmUiLCIkYnJvYWRjYXN0IiwiX3Nob3dTbGlkZXMiLCJzbGlkZSIsIl9nb1RvVXJsIiwiX3JlZGUiLCJ1cmwiLCJ2YWxvciIsInRpcG8iLCJyZXBsYWNlIiwid2luZG93Iiwib3BlbiIsImdldFBhbGVzdHJhIiwibWF4IiwiYnRuQ29tZW50YXJpbyIsImdldENvbWVudGFyaW9zIiwic2hvd1NsaWRlcyIsInJhdGVDbGljayIsImJ0blZvbHRhciIsImFkZENsaWNrIiwib25Ib2xkTm90YSIsImdvVG9VcmwiLCIkb24iXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFzQkEsU0FBQUEsR0FBQUMsRUFBQUMsRUFBQUMsR0FlQSxRQUFBQyxHQUFBQyxHQUNBLE1BQUFGLEdBQUFHLG9CQUFBRCxHQVNBLFFBQUFFLEtBQ0FOLEVBQUFPLFVBQUFOLEVBQUFPLGVBekJBUixFQUFBUyxlQUFBTixFQUVBRyxJQWpCQUksUUFDQUMsT0FBQSxTQUNBQyxXQUFBLFdBQUFiLEdBRUFBLEVBQUFjLFNBQUEsU0FBQSxjQUFBLFlDYkEsV0FDQSxZQXFDQSxTQUFBQyxHQUFBZCxFQUFBZSxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBbEIsRUFBQUMsRUFBQWtCLEVBQUFDLEdBOEJBLFFBQUFDLEtBQ0FwQixFQUFBcUIsZ0JBQUFOLEVBQUFPLE1BS0F4QixFQUFBeUIsS0FBQUMsVUFBQXhCLEVBQUFxQixnQkFBQU4sRUFBQU8sS0FDQUosRUFBQU8sS0FBQSxpQ0FBQSxVQUFBLEVBQUEsUUFMQTNCLEVBQUE0QixTQUFBRixXQUFBMUIsRUFBQXlCLEtBQUFDLFVBQ0F6QixFQUFBNEIsZUFBQTdCLEVBQUE0QixTQUFBLGFBQ0ExQixFQUFBNEIsZ0JBQUFiLEVBQUFPLElBQUF4QixFQUFBeUIsS0FBQUMsWUFhQSxRQUFBSyxLQUNBZixFQUFBZ0IsR0FBQSxRQVdBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQ0FBLEVBQUFQLFVBQUE1QixFQUFBd0IsS0FDQVksSUFTQSxRQUFBQSxLQUNBZixFQUFBZ0IsY0FBQXJDLEVBQUF3QixLQUFBYyxLQUFBLFNBQUFDLEdBQ0F2QyxFQUFBd0MsTUFBQUQsSUFTQSxRQUFBRSxLQUNBLEdBQUFDLEdBQUEsR0FBQUMsS0FFQSxJQUFBM0MsRUFBQTRCLFNBQUFnQixNQUFBRixFQUFBRyxVQUVBLENBQUEzQixFQUFBUyxNQUNBbUIsU0FBQSx3UkFHQUMsTUFBQSxxQkFDQUMsU0FBQSw2Q0FDQUMsTUFBQWpELEVBQ0FrRCxVQUVBQyxLQUFBLGFBR0FBLEtBQUEsWUFDQUMsS0FBQSxtQkFDQUMsTUFBQSxTQUFBbkIsR0FDQSxNQUFBbEMsR0FBQXNELFdBQUFDLE1BQUF2RCxFQUFBc0QsV0FBQUUsT0FBQXhELEVBQUFzRCxXQUFBRyxPQUlBekQsRUFBQTBELFlBQUF6RCxFQUFBMEQsY0FBQTNELEVBQUE0QixTQUFBNUIsRUFBQXNELFlBQ0F0RCxFQUFBc0QsZUFDQSxJQUxBcEIsRUFBQTBCLHFCQUNBeEMsR0FBQU8sS0FBQSw2QkFBQSxVQUFBLEVBQUEsZ0JBa0JBUCxHQUFBTyxLQUFBLHFEQUFBLFVBQUEsRUFBQSxNQVNBLFFBQUFrQyxHQUFBQyxHQUNBM0MsRUFBQVEsTUFDQW9DLGdCQUFBLFVBQ0FDLFVBQUEsc0JBQ0FDLFdBQUEsU0FDQUMsU0FBQSxTQUNBQyxPQUFBLGFBR0FDLGNBQUEsU0FBQUMsR0FDQSxPQUFBLEdBRUFDLHlCQUFBLFdBS0EsTUFKQWpELEdBQUFrRCxPQUFBVCxHQUNBeEIsS0FBQSxXQUNBdkIsRUFBQXlELFdBQUEsYUFBQTVDLFNBQUE1QixFQUFBd0IsU0FFQSxLQVdBLFFBQUFpRCxLQUNBLEdBQUEvQixHQUFBLEdBQUFDLEtBQ0EsT0FBQUQsR0FBQUcsV0FBQTdDLEVBQUE0QixTQUFBZ0IsTUFBQTVDLEVBQUE0QixTQUFBOEMsTUFVQSxRQUFBQyxHQUFBQyxHQUNBLEdBQUFDLEdBQUFELEVBQUFFLEtBRUEsbUJBQUFGLEVBQUFHLE9BQ0FGLEVBQUEsc0JBQUFBLEVBQUFHLFFBQUEsSUFBQSxLQUVBQyxPQUFBQyxLQUFBTCxFQUFBLFdBOUtBN0UsRUFBQXdCLElBQUFQLEVBQUFPLElBQ0F4QixFQUFBNEIsU0FBQTNCLEVBQUFrRixZQUFBbEUsRUFBQU8sS0FDQXhCLEVBQUF5QixRQUNBekIsRUFBQXlCLEtBQUFDLFVBQUF4QixFQUFBcUIsZ0JBQUFOLEVBQUFPLEtBQUF0QixFQUFBcUIsZ0JBQUFOLEVBQUFPLEtBQUEsRUFDQXhCLEVBQUF5QixLQUFBMkQsSUFBQSxFQUNBcEYsRUFBQXdDLFNBQ0F4QyxFQUFBcUYsZUFBQSxFQUNBckYsRUFBQXNELGNBQ0F0RCxFQUFBMEQsWUFBQXpELEVBQUFxRixlQUFBdEYsRUFBQTRCLFVBQ0E1QixFQUFBdUYsV0FBQWQsSUFFQXpFLEVBQUF3RixVQUFBbEUsRUFDQXRCLEVBQUF5RixVQUFBMUQsRUFDQS9CLEVBQUEwRixTQUFBakQsRUFDQXpDLEVBQUEyRixXQUFBOUIsRUFDQTdELEVBQUE0RixRQUFBakIsRUFDQTNFLEVBQUE2RixJQUFBLFlBQUE1RCxHQUVBRyxJQWpEQTFCLFFBQ0FDLE9BQUEsU0FDQUMsV0FBQSxlQUFBRSxHQUVBQSxFQUFBRCxTQUNBLFNBQ0EsYUFDQSxTQUNBLGVBQ0EsY0FDQSxvQkFDQSxjQUNBLFFBQ0EsYUFDQSIsImZpbGUiOiJjb250cm9sbGVycy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIENvbnRyb2xsZXIgSG9tZVxuICAgICAqIEBhdXRob3IgV2FsdGVyIEdhbmRhcmVsbGEgPHdhbHRlci53Z2JuQGdtYWlsLmNvbT5cbiAgICAgKiBAbWVtYmVyb2YganNkYXlcbiAgICAgKiBAdmVyc2lvbiAxLjAuMFxuICAgICAqL1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnanNkYXknKVxuICAgICAgICAuY29udHJvbGxlcignSG9tZUN0cmwnLCBIb21lQ3RybCk7XG5cbiAgICBIb21lQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnZmlyZVNlcnZpY2UnLCAnVXRpbHMnXTtcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBqc2RheVxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXG4gICAgICogQG5hbWUgSG9tZUN0cmxcbiAgICAgKiBAcGFyYW0gJHNjb3BlIHtzZXJ2aWNlfSAgICAgICAgICBDb250cm9sbGVyIHNjb3BlXG4gICAgICogQHBhcmFtIGZpcmVTZXJ2aWNlIHtmYWN0b3J5fSAgICAgRmlyZWJhc2Ugc2VydmljZVxuICAgICAqIEBwYXJhbSBVdGlscyB7ZmFjdG9yeX0gICAgICAgICAgIEZ1bsOnw7VlcyB1dGlsaXTDoXJpYXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBIb21lQ3RybCgkc2NvcGUsIGZpcmVTZXJ2aWNlLCBVdGlscykge1xuICAgICAgICAkc2NvcGUucGFyc2VEYXRlVG9TdHIgPSBfcGFyc2VEYXRlVG9TdHI7XG5cbiAgICAgICAgX2NhcnJlZ2FQYWxlc3RyYXMoKTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGdW7Dp8OjbyBxdWUgY29udmVydGUgdW1hIGRhdGFcbiAgICAgICAgICogQG1lbWJlcm9mIEhvbWVDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfcGFyc2VEYXRlVG9TdHJcbiAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IF9kYXRhICAgICAgICBUaW1lc3RhbXAgZGEgZGF0YSBhIHNlciByZXNvbHZpZGFcbiAgICAgICAgICogQHJldHVybnMge1N0cmluZ30gICAgICAgICAgICBEYXRhIHBhcnNlYWRhXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfcGFyc2VEYXRlVG9TdHIgKF9kYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gVXRpbHMucGFyc2VTaG9ydERhdGVUb1N0cihfZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRnVuw6fDo28gcXVlIGNhcnJlZ2EgYSBsaXN0YSBkZSBwYWxlc3RyYXMgYSBwYXJ0aXIgZG8gc2VydmljZSBGaXJlYmFzZVxuICAgICAgICAgKiBAbWVtYmVyb2YgSG9tZUN0cmxcbiAgICAgICAgICogQGZ1bmN0aW9uIF9jYXJyZWdhUGFsZXN0cmFzXG4gICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSAgICAgICAgICAgUHJvbWlzZSBkYSBsaXN0YSBkZSBwYWxlc3RyYXNcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9jYXJyZWdhUGFsZXN0cmFzICgpIHtcbiAgICAgICAgICAgICRzY29wZS5wYWxlc3RyYXMgPSBmaXJlU2VydmljZS5nZXRQYWxlc3RyYXMoKTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBDb250cm9sbGVyIFBhbGVzdHJhXG4gICAgICogQGF1dGhvciBXYWx0ZXIgR2FuZGFyZWxsYSA8d2FsdGVyLndnYm5AZ21haWwuY29tPlxuICAgICAqIEBtZW1iZXJvZiBqc2RheVxuICAgICAqIEB2ZXJzaW9uIDEuMC4wXG4gICAgICovXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdqc2RheScpXG4gICAgICAgIC5jb250cm9sbGVyKCdQYWxlc3RyYUN0cmwnLCBQYWxlc3RyYUN0cmwpO1xuXG4gICAgUGFsZXN0cmFDdHJsLiRpbmplY3QgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJHJvb3RTY29wZScsXG4gICAgICAgICckc3RhdGUnLFxuICAgICAgICAnJHN0YXRlUGFyYW1zJyxcbiAgICAgICAgJyRpb25pY1BvcHVwJyxcbiAgICAgICAgJyRpb25pY0FjdGlvblNoZWV0JyxcbiAgICAgICAgJ2ZpcmVTZXJ2aWNlJyxcbiAgICAgICAgJ1V0aWxzJyxcbiAgICAgICAgJ2lvbmljVG9hc3QnLFxuICAgICAgICAnbm90ZVNlcnZpY2UnXG4gICAgXTtcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBqc2RheVxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXG4gICAgICogQG5hbWUgUGFsZXN0cmFDdHJsXG4gICAgICogQHBhcmFtICRzY29wZSB7c2VydmljZX0gICAgICAgICAgQ29udHJvbGxlciBzY29wZVxuICAgICAqIEBwYXJhbSAkc3RhdGUge3Byb3ZpZGVyfSAgICAgICAgIFN0YXRlIHByb3ZpZGVyXG4gICAgICogQHBhcmFtICRzdGF0ZVBhcmFtcyB7cHJvdmlkZXJ9ICAgU3RhdGUgcGFyYW1zXG4gICAgICogQHBhcmFtIGZpcmVTZXJ2aWNlIHtmYWN0b3J5fSAgICAgRmlyZWJhc2Ugc2VydmljZVxuICAgICAqIEBwYXJhbSBVdGlscyB7ZmFjdG9yeX0gICAgICAgICAgIEZ1bsOnw7VlcyB1dGlsaXTDoXJpYXNcbiAgICAgKiBAcGFyYW0gaW9uaWNUb2FzdCB7cHJvdmlkZXJ9ICAgICBUb2FzdCBwcm92aWRlclxuICAgICAqIEBwYXJhbSBub3RlU2VydmljZSB7c2VydmljZX0gICAgIFNlcnZpw6dvIGRlIHBlcnNpc3RlbmNpYSBkZSBub3Rhc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBhbGVzdHJhQ3RybCgkc2NvcGUsICRyb290U2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCAkaW9uaWNQb3B1cCwgJGlvbmljQWN0aW9uU2hlZXQsIGZpcmVTZXJ2aWNlLCBVdGlscywgaW9uaWNUb2FzdCwgbm90ZVNlcnZpY2UpIHtcblxuICAgICAgICAkc2NvcGUua2V5ID0gJHN0YXRlUGFyYW1zLmtleTtcbiAgICAgICAgJHNjb3BlLnBhbGVzdHJhID0gZmlyZVNlcnZpY2UuZ2V0UGFsZXN0cmEoJHN0YXRlUGFyYW1zLmtleSk7XG4gICAgICAgICRzY29wZS5yYXRlID0ge307XG4gICAgICAgICRzY29wZS5yYXRlLmF2YWxpYWNhbyA9IFV0aWxzLmdldExvY2FsU3RvcmFnZSgkc3RhdGVQYXJhbXMua2V5KSA/IFV0aWxzLmdldExvY2FsU3RvcmFnZSgkc3RhdGVQYXJhbXMua2V5KSA6IDA7XG4gICAgICAgICRzY29wZS5yYXRlLm1heCA9IDU7XG4gICAgICAgICRzY29wZS5ub3RhcyA9IFtdO1xuICAgICAgICAkc2NvcGUuYnRuQ29tZW50YXJpbyA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuY29tZW50YXJpbyA9IHt9O1xuICAgICAgICAkc2NvcGUuY29tZW50YXJpb3MgPSBmaXJlU2VydmljZS5nZXRDb21lbnRhcmlvcygkc2NvcGUucGFsZXN0cmEpO1xuICAgICAgICAkc2NvcGUuc2hvd1NsaWRlcyA9IF9zaG93U2xpZGVzKCk7XG5cbiAgICAgICAgJHNjb3BlLnJhdGVDbGljayA9IF9yYXRlQ2xpY2s7XG4gICAgICAgICRzY29wZS5idG5Wb2x0YXIgPSBfYnRuVm9sdGFyO1xuICAgICAgICAkc2NvcGUuYWRkQ2xpY2sgPSBfYWRkQ2xpY2s7XG4gICAgICAgICRzY29wZS5vbkhvbGROb3RhID0gX29uSG9sZE5vdGE7XG4gICAgICAgICRzY29wZS5nb1RvVXJsID0gX2dvVG9Vcmw7XG4gICAgICAgICRzY29wZS4kb24oJ25vdGFBZGRlZCcsIF9ub3RhQWRkZWQpO1xuXG4gICAgICAgIF9nZXROb3RhcygpO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZ1bsOnw6NvIHF1ZSBjYXB0dXJhIG8gY2xpcXVlIG5hIGRpcmV0aXZhIGRlIGF2YWxpYcOnw6NvIGUgc2FsdmEgbyB2b3RvIGRvIHVzdcOhcmlvXG4gICAgICAgICAqIEBtZW1iZXJvZiBQYWxlc3RyYUN0cmxcbiAgICAgICAgICogQGZ1bmN0aW9uIF9yYXRlQ2xpY2tcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9yYXRlQ2xpY2sgKCkge1xuICAgICAgICAgICAgaWYgKCFVdGlscy5nZXRMb2NhbFN0b3JhZ2UoJHN0YXRlUGFyYW1zLmtleSkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFsZXN0cmEuYXZhbGlhY2FvICs9ICRzY29wZS5yYXRlLmF2YWxpYWNhbztcbiAgICAgICAgICAgICAgICBmaXJlU2VydmljZS51cGRhdGVQYWxlc3RyYSgkc2NvcGUucGFsZXN0cmEsICdhdmFsaWFjYW8nKTtcbiAgICAgICAgICAgICAgICBVdGlscy5zZXRMb2NhbFN0b3JhZ2UoJHN0YXRlUGFyYW1zLmtleSwgJHNjb3BlLnJhdGUuYXZhbGlhY2FvKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJhdGUuYXZhbGlhY2FvID0gVXRpbHMuZ2V0TG9jYWxTdG9yYWdlKCRzdGF0ZVBhcmFtcy5rZXkpO1xuICAgICAgICAgICAgICAgIGlvbmljVG9hc3Quc2hvdygnVm9jw6ogasOhIGF2YWxpb3UgZXN0YSBwYWxlc3RyYS4nLCAnYm90dG9tJywgZmFsc2UsIDI1MDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZ1bsOnw6NvIHF1ZSBjYXB0dXJhIG8gYm90w6NvIHZvbHRhciBlIGRpcmVjaW9uYSBwYXJhIHRlbGEgSG9tZVxuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfYnRuVm9sdGFyXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfYnRuVm9sdGFyICgpIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZ1bsOnw6NvIHF1ZSBlc2N1dGEgbyBldmVudG8gbm90YUFkZGVkIGUgYXR1YWxpemEgYXMgbm90YXMgbmEgdGVsYVxuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfbm90YUFkZGVkXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBlICAgICAgICBFdmVudCBvYmplY3RcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgICAgIERhdGEgcmVzdWx0IG9iamVjdFxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX25vdGFBZGRlZCAoZSwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEucGFsZXN0cmEgPT0gJHNjb3BlLmtleSlcbiAgICAgICAgICAgICAgICBfZ2V0Tm90YXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGdW7Dp8OjbyBxdWUgY29uc3VsdGEgbyBzZXJ2aWNlIGRlIE5vdGFzIGUgYXR1YWxpemEgYSBsaXN0YSBkZSBub3Rhc1xuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBnZXROb3Rhc1xuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX2dldE5vdGFzKCkge1xuICAgICAgICAgICAgbm90ZVNlcnZpY2UuZ2V0QnlQYWxlc3RyYSgkc2NvcGUua2V5KS50aGVuKGZ1bmN0aW9uKHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubm90YXMgPSByZXN1bHRzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQm90w6NvIHF1ZSBhZGljaW9uYSB1bSBjb21lbnTDoXJpbyDDoCBwYWxlc3RyYVxuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfYWRkQ2xpY2tcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9hZGRDbGljayAoKSB7XG4gICAgICAgICAgICB2YXIgX2hvamUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnBhbGVzdHJhLmhvcmEgPD0gX2hvamUuZ2V0VGltZSgpKXtcblxuICAgICAgICAgICAgICAgIHZhciBjb21Qb3B1cCA9ICRpb25pY1BvcHVwLnNob3coe1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiY29tZW50YXJpby5ub21lXCIgcGxhY2Vob2xkZXI9XCJTZXUgbm9tZS4uLlwiIGNsYXNzPVwiY29tLWlucHV0XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICc8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImNvbWVudGFyaW8uZW1haWxcIiBwbGFjZWhvbGRlcj1cIlNldSBlLW1haWwuLi5cIiBjbGFzcz1cImNvbS1pbnB1dFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPHRleHRhcmVhIG5nLW1vZGVsPVwiY29tZW50YXJpby50ZXh0b1wiIHBsYWNlaG9sZGVyPVwiQ29tZW50w6FyaW8uLi5cIiBjbGFzcz1cImNvbS10ZXh0XCI+PC90ZXh0YXJlYT4nLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0Zhw6dhIHVtIGNvbWVudMOhcmlvJyxcbiAgICAgICAgICAgICAgICAgICAgc3ViVGl0bGU6ICdEZWl4ZSBhcXVpIHN1YSBvcGluacOjbyBzb2JyZSBlc3RhIHBhbGVzdHJhJyxcbiAgICAgICAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdDYW5jZWxhcidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJzxiPk9LPC9iPicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2J1dHRvbi1lbmVyZ2l6ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVGFwOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmNvbWVudGFyaW8ubm9tZSB8fCAhJHNjb3BlLmNvbWVudGFyaW8uZW1haWwgfHwgISRzY29wZS5jb21lbnRhcmlvLnRleHRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpb25pY1RvYXN0LnNob3coJ1ByZWVuY2hhIHRvZG9zIG9zIGVzcGHDp29zLicsICdib3R0b20nLCBmYWxzZSwgMTUwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29tZW50YXJpb3MgPSBmaXJlU2VydmljZS5hZGRDb21lbnRhcmlvKCRzY29wZS5wYWxlc3RyYSwgJHNjb3BlLmNvbWVudGFyaW8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbWVudGFyaW8gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvKmNvbVBvcHVwLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jb21lbnRhcmlvcyA9IGZpcmVTZXJ2aWNlLmFkZENvbWVudGFyaW8oJHNjb3BlLnBhbGVzdHJhLCByZXMpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCdjYW5jZWwnKTtcbiAgICAgICAgICAgICAgICB9KTsqL1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlvbmljVG9hc3Quc2hvdygnVm9jw6ogc8OzIHBvZGVyw6EgY29tZW5nYXIgYXDDs3MgbyBpbsOtY2lvIGRhIHBhbGVzdHJhLicsICdib3R0b20nLCBmYWxzZSwgMjUwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQcOnw6NvIGV4ZWN1dGFkYSBhbyBzZWd1cmFyIGVtIGNpbWEgZGUgdW1hIG5vdGFcbiAgICAgICAgICogQG1lbWJlcm9mIFBhbGVzdHJhQ3RybFxuICAgICAgICAgKiBAZnVuY3Rpb24gX29uSG9sZE5vdGFcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9vbkhvbGROb3RhIChfaWQpIHtcbiAgICAgICAgICAgIHZhciBoaWRlU2hlZXQgPSAkaW9uaWNBY3Rpb25TaGVldC5zaG93KHtcbiAgICAgICAgICAgICAgICBkZXN0cnVjdGl2ZVRleHQ6ICdFeGNsdWlyJyxcbiAgICAgICAgICAgICAgICB0aXRsZVRleHQ6ICdPIHF1ZSBkZXNlamEgZmF6ZXI/JyxcbiAgICAgICAgICAgICAgICBjYW5jZWxUZXh0OiAnQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICBjc3NDbGFzczogJ3NoZWV0cycsXG4gICAgICAgICAgICAgICAgY2FuY2VsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGNhbmNlbCBjb2RlLi5cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJ1dHRvbkNsaWNrZWQ6IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVzdHJ1Y3RpdmVCdXR0b25DbGlja2VkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vdGVTZXJ2aWNlLnJlbW92ZShfaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdub3RhQWRkZWQnLCB7cGFsZXN0cmE6ICRzY29wZS5rZXl9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWZXJpZmljYSBzZSBvIGJvdMOjbyBkZSBzbGlkZXMgcG9kZSBzZXIgZXhpYmlkb1xuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfc2hvd1NsaWRlc1xuICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9zaG93U2xpZGVzICgpIHtcbiAgICAgICAgICAgIHZhciBfaG9qZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gX2hvamUuZ2V0VGltZSgpID49ICRzY29wZS5wYWxlc3RyYS5ob3JhICYmICRzY29wZS5wYWxlc3RyYS5zbGlkZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBYnJlIGEgdXJsIGV4dGVybmEgbm8gbmF2ZWdhZG9yIG5hdGl2b1xuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfZ29Ub1VybFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gX3JlZGVcbiAgICAgICAgICogQHJldHVybnMge1N0cmluZ30gdXJsXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfZ29Ub1VybCAoX3JlZGUpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBfcmVkZS52YWxvcjtcblxuICAgICAgICAgICAgaWYgKF9yZWRlLnRpcG8gPT0gJ3NvY2lhbC10d2l0dGVyJylcbiAgICAgICAgICAgICAgICB1cmwgPSBcImh0dHA6Ly90d2l0dGVyLmNvbS9cIit1cmwucmVwbGFjZSgnQCcsJycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB3aW5kb3cub3Blbih1cmwsICdfc3lzdGVtJyk7XG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
