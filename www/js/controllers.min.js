!function(){"use strict";function e(e,t,a){function o(e){return a.parseShortDateToStr(e)}function n(){e.palestras=t.getPalestras()}e.parseDateToStr=o,n()}angular.module("jsday").controller("HomeCtrl",e),e.$inject=["$scope","fireService","Utils"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,c,s,l){function u(){c.getLocalStorage(o.key)?(e.rate.avaliacao=c.getLocalStorage(o.key),s.show("Você já avaliou esta palestra.","bottom",!1,2500)):(e.palestra.avaliacao+=e.rate.avaliacao,i.updatePalestra(e.palestra,"avaliacao"),c.setLocalStorage(o.key,e.rate.avaliacao))}function m(){a.go("home")}function p(t,a){a.palestra==e.key&&d()}function d(){l.getByPalestra(e.key).then(function(t){e.notas=t})}function f(){var t=new Date;if(e.palestra.hora<=t.getTime()){n.show({template:'<input type="text" ng-model="comentario.nome" placeholder="Seu nome..." class="com-input"><input type="text" ng-model="comentario.email" placeholder="Seu e-mail..." class="com-input"><textarea ng-model="comentario.texto" placeholder="Comentário..." class="com-text"></textarea>',title:"Faça um comentário",subTitle:"Deixe aqui sua opinião sobre esta palestra",scope:e,buttons:[{text:"Cancelar"},{text:"<b>OK</b>",type:"button-energized",onTap:function(t){return e.comentario.nome&&e.comentario.email&&e.comentario.texto?(e.comentarios=i.addComentario(e.palestra,e.comentario),e.comentario={},!0):(t.preventDefault(),void s.show("Preencha todos os espaços.","bottom",!1,1500))}}]})}else s.show("Você só poderá comengar após o início da palestra.","bottom",!1,2500)}function g(a){r.show({destructiveText:"Excluir",titleText:"O que deseja fazer?",cancelText:"Cancel",cssClass:"sheets",cancel:function(){},buttonClicked:function(e){return!0},destructiveButtonClicked:function(){return l.remove(a).then(function(){t.$broadcast("notaAdded",{palestra:e.key})}),!0}})}function h(){var t=new Date;return t.getTime()>=e.palestra.hora&&e.palestra.slide}function v(e){var t=e.valor;"social-twitter"==e.tipo&&(t="http://twitter.com/"+t.replace("@","")),window.open(t,"_system")}e.key=o.key,e.palestra=i.getPalestra(o.key),e.rate={},e.rate.avaliacao=c.getLocalStorage(o.key)?c.getLocalStorage(o.key):0,e.rate.max=5,e.notas=[],e.btnComentario=!1,e.comentario={},e.comentarios=i.getComentarios(e.palestra),e.showSlides=h(),e.rateClick=u,e.btnVoltar=m,e.addClick=f,e.onHoldNota=g,e.goToUrl=v,e.$on("notaAdded",p),d()}angular.module("jsday").controller("PalestraCtrl",e),e.$inject=["$scope","$rootScope","$state","$stateParams","$ionicPopup","$ionicActionSheet","fireService","Utils","ionicToast","noteService"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvbWVDb250cm9sbGVyLmpzIiwicGFsZXN0cmFDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkhvbWVDdHJsIiwiJHNjb3BlIiwiZmlyZVNlcnZpY2UiLCJVdGlscyIsIl9wYXJzZURhdGVUb1N0ciIsIl9kYXRhIiwicGFyc2VTaG9ydERhdGVUb1N0ciIsIl9jYXJyZWdhUGFsZXN0cmFzIiwicGFsZXN0cmFzIiwiZ2V0UGFsZXN0cmFzIiwicGFyc2VEYXRlVG9TdHIiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRpbmplY3QiLCJQYWxlc3RyYUN0cmwiLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiJHN0YXRlUGFyYW1zIiwiJGlvbmljUG9wdXAiLCIkaW9uaWNBY3Rpb25TaGVldCIsImlvbmljVG9hc3QiLCJub3RlU2VydmljZSIsIl9yYXRlQ2xpY2siLCJnZXRMb2NhbFN0b3JhZ2UiLCJrZXkiLCJyYXRlIiwiYXZhbGlhY2FvIiwic2hvdyIsInBhbGVzdHJhIiwidXBkYXRlUGFsZXN0cmEiLCJzZXRMb2NhbFN0b3JhZ2UiLCJfYnRuVm9sdGFyIiwiZ28iLCJfbm90YUFkZGVkIiwiZSIsImRhdGEiLCJfZ2V0Tm90YXMiLCJnZXRCeVBhbGVzdHJhIiwidGhlbiIsInJlc3VsdHMiLCJub3RhcyIsIl9hZGRDbGljayIsIl9ob2plIiwiRGF0ZSIsImhvcmEiLCJnZXRUaW1lIiwidGVtcGxhdGUiLCJ0aXRsZSIsInN1YlRpdGxlIiwic2NvcGUiLCJidXR0b25zIiwidGV4dCIsInR5cGUiLCJvblRhcCIsImNvbWVudGFyaW8iLCJub21lIiwiZW1haWwiLCJ0ZXh0byIsImNvbWVudGFyaW9zIiwiYWRkQ29tZW50YXJpbyIsInByZXZlbnREZWZhdWx0IiwiX29uSG9sZE5vdGEiLCJfaWQiLCJkZXN0cnVjdGl2ZVRleHQiLCJ0aXRsZVRleHQiLCJjYW5jZWxUZXh0IiwiY3NzQ2xhc3MiLCJjYW5jZWwiLCJidXR0b25DbGlja2VkIiwiaW5kZXgiLCJkZXN0cnVjdGl2ZUJ1dHRvbkNsaWNrZWQiLCJyZW1vdmUiLCIkYnJvYWRjYXN0IiwiX3Nob3dTbGlkZXMiLCJzbGlkZSIsIl9nb1RvVXJsIiwiX3JlZGUiLCJ1cmwiLCJ2YWxvciIsInRpcG8iLCJyZXBsYWNlIiwid2luZG93Iiwib3BlbiIsImdldFBhbGVzdHJhIiwibWF4IiwiYnRuQ29tZW50YXJpbyIsImdldENvbWVudGFyaW9zIiwic2hvd1NsaWRlcyIsInJhdGVDbGljayIsImJ0blZvbHRhciIsImFkZENsaWNrIiwib25Ib2xkTm90YSIsImdvVG9VcmwiLCIkb24iXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFzQkEsU0FBQUEsR0FBQUMsRUFBQUMsRUFBQUMsR0FrQkEsUUFBQUMsR0FBQUMsR0FDQSxNQUFBRixHQUFBRyxvQkFBQUQsR0FTQSxRQUFBRSxLQUNBTixFQUFBTyxVQUFBTixFQUFBTyxlQTVCQVIsRUFBQVMsZUFBQU4sRUFFQUcsSUFqQkFJLFFBQ0FDLE9BQUEsU0FDQUMsV0FBQSxXQUFBYixHQUVBQSxFQUFBYyxTQUFBLFNBQUEsY0FBQSxZQ2JBLFdBQ0EsWUFxQ0EsU0FBQUMsR0FBQWQsRUFBQWUsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQWxCLEVBQUFDLEVBQUFrQixFQUFBQyxHQW9DQSxRQUFBQyxLQUNBcEIsRUFBQXFCLGdCQUFBTixFQUFBTyxNQUtBeEIsRUFBQXlCLEtBQUFDLFVBQUF4QixFQUFBcUIsZ0JBQUFOLEVBQUFPLEtBQ0FKLEVBQUFPLEtBQUEsaUNBQUEsVUFBQSxFQUFBLFFBTEEzQixFQUFBNEIsU0FBQUYsV0FBQTFCLEVBQUF5QixLQUFBQyxVQUNBekIsRUFBQTRCLGVBQUE3QixFQUFBNEIsU0FBQSxhQUNBMUIsRUFBQTRCLGdCQUFBYixFQUFBTyxJQUFBeEIsRUFBQXlCLEtBQUFDLFlBYUEsUUFBQUssS0FDQWYsRUFBQWdCLEdBQUEsUUFhQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUNBQSxFQUFBUCxVQUFBNUIsRUFBQXdCLEtBQ0FZLElBU0EsUUFBQUEsS0FDQWYsRUFBQWdCLGNBQUFyQyxFQUFBd0IsS0FBQWMsS0FBQSxTQUFBQyxHQUNBdkMsRUFBQXdDLE1BQUFELElBYUEsUUFBQUUsS0FDQSxHQUFBQyxHQUFBLEdBQUFDLEtBRUEsSUFBQTNDLEVBQUE0QixTQUFBZ0IsTUFBQUYsRUFBQUcsVUFFQSxDQUFBM0IsRUFBQVMsTUFDQW1CLFNBQUEsd1JBR0FDLE1BQUEscUJBQ0FDLFNBQUEsNkNBQ0FDLE1BQUFqRCxFQUNBa0QsVUFFQUMsS0FBQSxhQUdBQSxLQUFBLFlBQ0FDLEtBQUEsbUJBQ0FDLE1BQUEsU0FBQW5CLEdBQ0EsTUFBQWxDLEdBQUFzRCxXQUFBQyxNQUFBdkQsRUFBQXNELFdBQUFFLE9BQUF4RCxFQUFBc0QsV0FBQUcsT0FJQXpELEVBQUEwRCxZQUFBekQsRUFBQTBELGNBQUEzRCxFQUFBNEIsU0FBQTVCLEVBQUFzRCxZQUNBdEQsRUFBQXNELGVBQ0EsSUFMQXBCLEVBQUEwQixxQkFDQXhDLEdBQUFPLEtBQUEsNkJBQUEsVUFBQSxFQUFBLGdCQVlBUCxHQUFBTyxLQUFBLHFEQUFBLFVBQUEsRUFBQSxNQWVBLFFBQUFrQyxHQUFBQyxHQUNBM0MsRUFBQVEsTUFDQW9DLGdCQUFBLFVBQ0FDLFVBQUEsc0JBQ0FDLFdBQUEsU0FDQUMsU0FBQSxTQUNBQyxPQUFBLGFBR0FDLGNBQUEsU0FBQUMsR0FDQSxPQUFBLEdBRUFDLHlCQUFBLFdBS0EsTUFKQWpELEdBQUFrRCxPQUFBVCxHQUNBeEIsS0FBQSxXQUNBdkIsRUFBQXlELFdBQUEsYUFBQTVDLFNBQUE1QixFQUFBd0IsU0FFQSxLQWNBLFFBQUFpRCxLQUNBLEdBQUEvQixHQUFBLEdBQUFDLEtBQ0EsT0FBQUQsR0FBQUcsV0FBQTdDLEVBQUE0QixTQUFBZ0IsTUFBQTVDLEVBQUE0QixTQUFBOEMsTUFZQSxRQUFBQyxHQUFBQyxHQUNBLEdBQUFDLEdBQUFELEVBQUFFLEtBRUEsbUJBQUFGLEVBQUFHLE9BQ0FGLEVBQUEsc0JBQUFBLEVBQUFHLFFBQUEsSUFBQSxLQUVBQyxPQUFBQyxLQUFBTCxFQUFBLFdBOUxBN0UsRUFBQXdCLElBQUFQLEVBQUFPLElBQ0F4QixFQUFBNEIsU0FBQTNCLEVBQUFrRixZQUFBbEUsRUFBQU8sS0FDQXhCLEVBQUF5QixRQUNBekIsRUFBQXlCLEtBQUFDLFVBQUF4QixFQUFBcUIsZ0JBQUFOLEVBQUFPLEtBQUF0QixFQUFBcUIsZ0JBQUFOLEVBQUFPLEtBQUEsRUFDQXhCLEVBQUF5QixLQUFBMkQsSUFBQSxFQUNBcEYsRUFBQXdDLFNBQ0F4QyxFQUFBcUYsZUFBQSxFQUNBckYsRUFBQXNELGNBQ0F0RCxFQUFBMEQsWUFBQXpELEVBQUFxRixlQUFBdEYsRUFBQTRCLFVBQ0E1QixFQUFBdUYsV0FBQWQsSUFHQXpFLEVBQUF3RixVQUFBbEUsRUFDQXRCLEVBQUF5RixVQUFBMUQsRUFDQS9CLEVBQUEwRixTQUFBakQsRUFDQXpDLEVBQUEyRixXQUFBOUIsRUFDQTdELEVBQUE0RixRQUFBakIsRUFDQTNFLEVBQUE2RixJQUFBLFlBQUE1RCxHQUVBRyxJQW5EQTFCLFFBQ0FDLE9BQUEsU0FDQUMsV0FBQSxlQUFBRSxHQUVBQSxFQUFBRCxTQUNBLFNBQ0EsYUFDQSxTQUNBLGVBQ0EsY0FDQSxvQkFDQSxjQUNBLFFBQ0EsYUFDQSIsImZpbGUiOiJjb250cm9sbGVycy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIENvbnRyb2xsZXIgSG9tZVxuICAgICAqIEBhdXRob3IgV2FsdGVyIEdhbmRhcmVsbGEgPHdhbHRlci53Z2JuQGdtYWlsLmNvbT5cbiAgICAgKiBAbWVtYmVyb2YganNkYXlcbiAgICAgKiBAdmVyc2lvbiAxLjAuMFxuICAgICAqL1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnanNkYXknKVxuICAgICAgICAuY29udHJvbGxlcignSG9tZUN0cmwnLCBIb21lQ3RybCk7XG5cbiAgICBIb21lQ3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnZmlyZVNlcnZpY2UnLCAnVXRpbHMnXTtcblxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJvZiBqc2RheVxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXG4gICAgICogQG5hbWUgSG9tZUN0cmxcbiAgICAgKiBAcGFyYW0gJHNjb3BlIHtzZXJ2aWNlfSAgICAgICAgICBDb250cm9sbGVyIHNjb3BlXG4gICAgICogQHBhcmFtIGZpcmVTZXJ2aWNlIHtmYWN0b3J5fSAgICAgRmlyZWJhc2Ugc2VydmljZVxuICAgICAqIEBwYXJhbSBVdGlscyB7ZmFjdG9yeX0gICAgICAgICAgIEZ1bsOnw7VlcyB1dGlsaXTDoXJpYXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBIb21lQ3RybCgkc2NvcGUsIGZpcmVTZXJ2aWNlLCBVdGlscykge1xuICAgICAgICAkc2NvcGUucGFyc2VEYXRlVG9TdHIgPSBfcGFyc2VEYXRlVG9TdHI7XG5cbiAgICAgICAgX2NhcnJlZ2FQYWxlc3RyYXMoKTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGdW7Dp8OjbyBxdWUgY29udmVydGUgdW1hIGRhdGFcbiAgICAgICAgICogRXN0YSBmdW7Dp8OjbyBjaGFtYSBvIGZhY3RvcnkgVXRpbHMgcGFyYSBmb3JtYXRhciBlIGNvbnZlcnRlciB1bWEgZGF0YSBubyBmb3JtYXRvIHRpbWVzdGFtcCBwYXJhIHF1ZSBwb3NzYVxuICAgICAgICAgKiBzZXIgbGlkYSBwb3IgaHVtYW5vcy5cbiAgICAgICAgICogXG4gICAgICAgICAqIEBtZW1iZXJvZiBIb21lQ3RybFxuICAgICAgICAgKiBAZnVuY3Rpb24gX3BhcnNlRGF0ZVRvU3RyXG4gICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBfZGF0YSAgICAgICAgVGltZXN0YW1wIGRhIGRhdGEgYSBzZXIgcmVzb2x2aWRhXG4gICAgICAgICAqIEByZXR1cm5zIHtTdHJpbmd9ICAgICAgICAgICAgRGF0YSBwYXJzZWFkYVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX3BhcnNlRGF0ZVRvU3RyIChfZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIFV0aWxzLnBhcnNlU2hvcnREYXRlVG9TdHIoX2RhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZ1bsOnw6NvIHF1ZSBjYXJyZWdhIGEgbGlzdGEgZGUgcGFsZXN0cmFzIGEgcGFydGlyIGRvIHNlcnZpY2UgRmlyZWJhc2VcbiAgICAgICAgICogQG1lbWJlcm9mIEhvbWVDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfY2FycmVnYVBhbGVzdHJhc1xuICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gICAgICAgICAgIFByb21pc2UgZGEgbGlzdGEgZGUgcGFsZXN0cmFzXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfY2FycmVnYVBhbGVzdHJhcyAoKSB7XG4gICAgICAgICAgICAkc2NvcGUucGFsZXN0cmFzID0gZmlyZVNlcnZpY2UuZ2V0UGFsZXN0cmFzKCk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gQ29udHJvbGxlciBQYWxlc3RyYVxuICAgICAqIEBhdXRob3IgV2FsdGVyIEdhbmRhcmVsbGEgPHdhbHRlci53Z2JuQGdtYWlsLmNvbT5cbiAgICAgKiBAbWVtYmVyb2YganNkYXlcbiAgICAgKiBAdmVyc2lvbiAxLjAuMFxuICAgICAqL1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnanNkYXknKVxuICAgICAgICAuY29udHJvbGxlcignUGFsZXN0cmFDdHJsJywgUGFsZXN0cmFDdHJsKTtcblxuICAgIFBhbGVzdHJhQ3RybC4kaW5qZWN0ID0gW1xuICAgICAgICAnJHNjb3BlJyxcbiAgICAgICAgJyRyb290U2NvcGUnLFxuICAgICAgICAnJHN0YXRlJyxcbiAgICAgICAgJyRzdGF0ZVBhcmFtcycsXG4gICAgICAgICckaW9uaWNQb3B1cCcsXG4gICAgICAgICckaW9uaWNBY3Rpb25TaGVldCcsXG4gICAgICAgICdmaXJlU2VydmljZScsXG4gICAgICAgICdVdGlscycsXG4gICAgICAgICdpb25pY1RvYXN0JyxcbiAgICAgICAgJ25vdGVTZXJ2aWNlJ1xuICAgIF07XG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YganNkYXlcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxuICAgICAqIEBuYW1lIFBhbGVzdHJhQ3RybFxuICAgICAqIEBwYXJhbSAkc2NvcGUge3NlcnZpY2V9ICAgICAgICAgIENvbnRyb2xsZXIgc2NvcGVcbiAgICAgKiBAcGFyYW0gJHN0YXRlIHtwcm92aWRlcn0gICAgICAgICBTdGF0ZSBwcm92aWRlclxuICAgICAqIEBwYXJhbSAkc3RhdGVQYXJhbXMge3Byb3ZpZGVyfSAgIFN0YXRlIHBhcmFtc1xuICAgICAqIEBwYXJhbSBmaXJlU2VydmljZSB7ZmFjdG9yeX0gICAgIEZpcmViYXNlIHNlcnZpY2VcbiAgICAgKiBAcGFyYW0gVXRpbHMge2ZhY3Rvcnl9ICAgICAgICAgICBGdW7Dp8O1ZXMgdXRpbGl0w6FyaWFzXG4gICAgICogQHBhcmFtIGlvbmljVG9hc3Qge3Byb3ZpZGVyfSAgICAgVG9hc3QgcHJvdmlkZXJcbiAgICAgKiBAcGFyYW0gbm90ZVNlcnZpY2Uge3NlcnZpY2V9ICAgICBTZXJ2acOnbyBkZSBwZXJzaXN0ZW5jaWEgZGUgbm90YXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQYWxlc3RyYUN0cmwoJHNjb3BlLCAkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgJGlvbmljUG9wdXAsICRpb25pY0FjdGlvblNoZWV0LCBmaXJlU2VydmljZSwgVXRpbHMsIGlvbmljVG9hc3QsIG5vdGVTZXJ2aWNlKSB7XG5cbiAgICAgICAgLy8gZXhwb25kbyBvcyBiaW5kaW5ncyBwYXJhIGEgdmlld1xuICAgICAgICAkc2NvcGUua2V5ID0gJHN0YXRlUGFyYW1zLmtleTtcbiAgICAgICAgJHNjb3BlLnBhbGVzdHJhID0gZmlyZVNlcnZpY2UuZ2V0UGFsZXN0cmEoJHN0YXRlUGFyYW1zLmtleSk7XG4gICAgICAgICRzY29wZS5yYXRlID0ge307XG4gICAgICAgICRzY29wZS5yYXRlLmF2YWxpYWNhbyA9IFV0aWxzLmdldExvY2FsU3RvcmFnZSgkc3RhdGVQYXJhbXMua2V5KSA/IFV0aWxzLmdldExvY2FsU3RvcmFnZSgkc3RhdGVQYXJhbXMua2V5KSA6IDA7XG4gICAgICAgICRzY29wZS5yYXRlLm1heCA9IDU7XG4gICAgICAgICRzY29wZS5ub3RhcyA9IFtdO1xuICAgICAgICAkc2NvcGUuYnRuQ29tZW50YXJpbyA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuY29tZW50YXJpbyA9IHt9O1xuICAgICAgICAkc2NvcGUuY29tZW50YXJpb3MgPSBmaXJlU2VydmljZS5nZXRDb21lbnRhcmlvcygkc2NvcGUucGFsZXN0cmEpO1xuICAgICAgICAkc2NvcGUuc2hvd1NsaWRlcyA9IF9zaG93U2xpZGVzKCk7XG5cbiAgICAgICAgLy8gZXhwb25kbyBhcyBmdW7Dp8O1ZXMgcGFyYSBhIHZpZXdcbiAgICAgICAgJHNjb3BlLnJhdGVDbGljayA9IF9yYXRlQ2xpY2s7XG4gICAgICAgICRzY29wZS5idG5Wb2x0YXIgPSBfYnRuVm9sdGFyO1xuICAgICAgICAkc2NvcGUuYWRkQ2xpY2sgPSBfYWRkQ2xpY2s7XG4gICAgICAgICRzY29wZS5vbkhvbGROb3RhID0gX29uSG9sZE5vdGE7XG4gICAgICAgICRzY29wZS5nb1RvVXJsID0gX2dvVG9Vcmw7XG4gICAgICAgICRzY29wZS4kb24oJ25vdGFBZGRlZCcsIF9ub3RhQWRkZWQpO1xuXG4gICAgICAgIF9nZXROb3RhcygpO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZ1bsOnw6NvIHF1ZSBjYXB0dXJhIG8gY2xpcXVlIG5hIGRpcmV0aXZhIGRlIGF2YWxpYcOnw6NvIGUgc2FsdmEgbyB2b3RvIGRvIHVzdcOhcmlvXG4gICAgICAgICAqIEVzdGEgZnVuw6fDo28gdmVyaWZpY2Egc2UgasOhIGV4aXN0ZSB1bSByZWdpc3RybyBubyBsb2NhbFN0b3JhZ2UgZG8gZGlzcG9zaXRpdm8gaW5kaWNhbmRvXG4gICAgICAgICAqIHF1ZSBvIHVzdcOhcmlvIGrDoSB2b3RvIG5lc3RhIHBhbGVzdHJhIGUsIHBvcnRhbnRvLCBpbXBlZGluZG8gcXVlIGVsZSB2b3RlIG5vdmFtZW50ZS5cbiAgICAgICAgICogQ2FzbyBuw6NvIGV4aXN0YSBlc3NlIHJlZ2lzdHJvIGxvY2FsLCBvIHZvdG8gw6kgY29tcHV0YWRvIGUgw6kgZmVpdG8gbyByZWdpc3RybyBsb2NhbC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlcm9mIFBhbGVzdHJhQ3RybFxuICAgICAgICAgKiBAZnVuY3Rpb24gX3JhdGVDbGlja1xuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX3JhdGVDbGljayAoKSB7XG4gICAgICAgICAgICBpZiAoIVV0aWxzLmdldExvY2FsU3RvcmFnZSgkc3RhdGVQYXJhbXMua2V5KSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5wYWxlc3RyYS5hdmFsaWFjYW8gKz0gJHNjb3BlLnJhdGUuYXZhbGlhY2FvO1xuICAgICAgICAgICAgICAgIGZpcmVTZXJ2aWNlLnVwZGF0ZVBhbGVzdHJhKCRzY29wZS5wYWxlc3RyYSwgJ2F2YWxpYWNhbycpO1xuICAgICAgICAgICAgICAgIFV0aWxzLnNldExvY2FsU3RvcmFnZSgkc3RhdGVQYXJhbXMua2V5LCAkc2NvcGUucmF0ZS5hdmFsaWFjYW8pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmF0ZS5hdmFsaWFjYW8gPSBVdGlscy5nZXRMb2NhbFN0b3JhZ2UoJHN0YXRlUGFyYW1zLmtleSk7XG4gICAgICAgICAgICAgICAgaW9uaWNUb2FzdC5zaG93KCdWb2PDqiBqw6EgYXZhbGlvdSBlc3RhIHBhbGVzdHJhLicsICdib3R0b20nLCBmYWxzZSwgMjUwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRnVuw6fDo28gcXVlIGNhcHR1cmEgbyBib3TDo28gdm9sdGFyIGUgZGlyZWNpb25hIHBhcmEgdGVsYSBIb21lXG4gICAgICAgICAqIEBtZW1iZXJvZiBQYWxlc3RyYUN0cmxcbiAgICAgICAgICogQGZ1bmN0aW9uIF9idG5Wb2x0YXJcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9idG5Wb2x0YXIgKCkge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRnVuw6fDo28gcXVlIGVzY3V0YSBvIGV2ZW50byBub3RhQWRkZWQsIHZlcmlmaWNhIHNlIGEgS2V5IHF1ZSB2ZW0gY29tIG8gZXZlbnRvIMOpIGRhIG1lc21hIHBhbGVzdHJhIHF1ZSBvIHVzdcOhcmlvXG4gICAgICAgICAqIGVzdMOhIHZpc3VhbGl6YW5kbyBlIGF0dWFsaXphIGFzIG5vdGFzIG5hIHRlbGFcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlcm9mIFBhbGVzdHJhQ3RybFxuICAgICAgICAgKiBAZnVuY3Rpb24gX25vdGFBZGRlZFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZSAgICAgICAgRXZlbnQgb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhICAgICBEYXRhIHJlc3VsdCBvYmplY3RcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9ub3RhQWRkZWQgKGUsIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLnBhbGVzdHJhID09ICRzY29wZS5rZXkpXG4gICAgICAgICAgICAgICAgX2dldE5vdGFzKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRnVuw6fDo28gcXVlIGNvbnN1bHRhIG8gc2VydmljZSBkZSBOb3RhcyBlIGF0dWFsaXphIGEgbGlzdGEgZGUgbm90YXNcbiAgICAgICAgICogQG1lbWJlcm9mIFBhbGVzdHJhQ3RybFxuICAgICAgICAgKiBAZnVuY3Rpb24gZ2V0Tm90YXNcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9nZXROb3RhcygpIHtcbiAgICAgICAgICAgIG5vdGVTZXJ2aWNlLmdldEJ5UGFsZXN0cmEoJHNjb3BlLmtleSkudGhlbihmdW5jdGlvbihyZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm5vdGFzID0gcmVzdWx0cztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZ1bsOnw6NvIHF1ZSBjYXB0dXJhIGEgYcOnw6NvIGRvIGJvdMOjbyBxdWUgZXhpYmUgbyBmb3JtdWzDoXJpbyBwYXJhIGNvbWVudGFyIGEgcGFsZXN0cmEuXG4gICAgICAgICAqIEVzdGEgZnVuw6fDo28gdmVyaWZpY2Egc2UgbyBob3LDoXJpbyBkYSBwYWxlc3RyYSBqw6EgZm9pIGFsY2Fuw6dhZG8uIFNlIGEgZGF0YS9ob3JhIGF0dWFsLCBiYXNlYWRhIG5vXG4gICAgICAgICAqIHRpbWVzdGFtcCwgZm9yIG1haW9yIHF1ZSBvIHRpbWVzdGFtcCBkYSBwYWxlc3RyYSBlbnTDo28gZXhpYmUgbyBmb3JtdWzDoXJpbywgY2FzbyBjb250csOhcmlvIGV4aWJlIHVtIFRvYXN0XG4gICAgICAgICAqIHF1ZSBpbmZvcm1hIGFvIHVzdcOhcmlvIHF1ZSBkZXZlIGFndWFyZGFyIG8gaW7DrWNpbyBkYSBwYWxlc3RyYS5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlcm9mIFBhbGVzdHJhQ3RybFxuICAgICAgICAgKiBAZnVuY3Rpb24gX2FkZENsaWNrXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfYWRkQ2xpY2sgKCkge1xuICAgICAgICAgICAgdmFyIF9ob2plID0gbmV3IERhdGUoKTtcblxuICAgICAgICAgICAgaWYgKCRzY29wZS5wYWxlc3RyYS5ob3JhIDw9IF9ob2plLmdldFRpbWUoKSl7XG5cbiAgICAgICAgICAgICAgICB2YXIgY29tUG9wdXAgPSAkaW9uaWNQb3B1cC5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImNvbWVudGFyaW8ubm9tZVwiIHBsYWNlaG9sZGVyPVwiU2V1IG5vbWUuLi5cIiBjbGFzcz1cImNvbS1pbnB1dFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJjb21lbnRhcmlvLmVtYWlsXCIgcGxhY2Vob2xkZXI9XCJTZXUgZS1tYWlsLi4uXCIgY2xhc3M9XCJjb20taW5wdXRcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzx0ZXh0YXJlYSBuZy1tb2RlbD1cImNvbWVudGFyaW8udGV4dG9cIiBwbGFjZWhvbGRlcj1cIkNvbWVudMOhcmlvLi4uXCIgY2xhc3M9XCJjb20tdGV4dFwiPjwvdGV4dGFyZWE+JyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdGYcOnYSB1bSBjb21lbnTDoXJpbycsXG4gICAgICAgICAgICAgICAgICAgIHN1YlRpdGxlOiAnRGVpeGUgYXF1aSBzdWEgb3BpbmnDo28gc29icmUgZXN0YSBwYWxlc3RyYScsXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnQ2FuY2VsYXInXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICc8Yj5PSzwvYj4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdidXR0b24tZW5lcmdpemVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblRhcDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5jb21lbnRhcmlvLm5vbWUgfHwgISRzY29wZS5jb21lbnRhcmlvLmVtYWlsIHx8ICEkc2NvcGUuY29tZW50YXJpby50ZXh0bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW9uaWNUb2FzdC5zaG93KCdQcmVlbmNoYSB0b2RvcyBvcyBlc3Bhw6dvcy4nLCAnYm90dG9tJywgZmFsc2UsIDE1MDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbWVudGFyaW9zID0gZmlyZVNlcnZpY2UuYWRkQ29tZW50YXJpbygkc2NvcGUucGFsZXN0cmEsICRzY29wZS5jb21lbnRhcmlvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb21lbnRhcmlvID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlvbmljVG9hc3Quc2hvdygnVm9jw6ogc8OzIHBvZGVyw6EgY29tZW5nYXIgYXDDs3MgbyBpbsOtY2lvIGRhIHBhbGVzdHJhLicsICdib3R0b20nLCBmYWxzZSwgMjUwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQcOnw6NvIGV4ZWN1dGFkYSBhbyBtYW50ZXIgbyBkZWRvIHNvYnJlIHVtYSBub3RhIHBvciBhbGd1bnMgc2VndW5kb3MuXG4gICAgICAgICAqIEVzdMOhIGZ1bsOnw6NvIHV0aWxpemEgdW0gcGx1Z2luIGRvIElvbmljIHBhcmEgZXhpYmlyIHVtYSBBY3Rpb25TaGVldCBwYXJhIG8gdXN1w6FyaW8gZGVjaWRpciBzZSB2YWkgZXhjbHVpclxuICAgICAgICAgKiBvdSBuw6NvIGEgbm90YSBwcmVzc2lvbmFkYS5cbiAgICAgICAgICogQ2FzbyBvIHVzdcOhcmlvIG9wdGUgcG9yIGV4Y2x1aXIsIGEgZnVuw6fDo28gcHJvY2VkZSBjaGFtYW5kbyBvIHNlcnZpY2UgcXVlIG1hbmlwdWxhIG8gTG92ZWZpZWxkLlxuICAgICAgICAgKiBBbyBjb25jbHVpciBhIGV4Y2x1c8OjbywgYSBmdW7Dp8OjbyBlbWl0ZSB1bSBldmVudG8gJ25vdGFBZGRlZCcgcXVlIMOpIHJlc3BvbnPDoXZlbCBwb3IgcHJvcGFnYXIgYSBhdHVhbGl6YcOnw6NvXG4gICAgICAgICAqIGRhIGxpc3RhIGRlIG5vdGFzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfb25Ib2xkTm90YVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX29uSG9sZE5vdGEgKF9pZCkge1xuICAgICAgICAgICAgdmFyIGhpZGVTaGVldCA9ICRpb25pY0FjdGlvblNoZWV0LnNob3coe1xuICAgICAgICAgICAgICAgIGRlc3RydWN0aXZlVGV4dDogJ0V4Y2x1aXInLFxuICAgICAgICAgICAgICAgIHRpdGxlVGV4dDogJ08gcXVlIGRlc2VqYSBmYXplcj8nLFxuICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ6ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnc2hlZXRzJyxcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgY2FuY2VsIGNvZGUuLlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnV0dG9uQ2xpY2tlZDogZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZXN0cnVjdGl2ZUJ1dHRvbkNsaWNrZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbm90ZVNlcnZpY2UucmVtb3ZlKF9pZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25vdGFBZGRlZCcsIHtwYWxlc3RyYTogJHNjb3BlLmtleX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWNhIHNlIG8gYm90w6NvIGRlIHNsaWRlcyBwb2RlIHNlciBleGliaWRvXG4gICAgICAgICAqIEVzdGEgZnVuw6fDo28gdGVtIGNvbW8gb2JqZXRpdm8gdmVyaWZpY2FyIHNlIGEgcGFsZXN0cmEgasOhIGZvaSBpbmljaWFkYSwgYmFzZWFkYSBubyB0aW1lc3RhbXAgYXR1YWwgZSBubyB0aW1lc3RhbXBcbiAgICAgICAgICogZGEgcGFsZXN0cmEsIHBhcmEgc8OzIGV4aWJpciBvIGJvdMOjbyBkbyBzbGlkZSBhcMOzcyBvIGluw61jaW8gZGEgcGFsZXN0cmEuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXJvZiBQYWxlc3RyYUN0cmxcbiAgICAgICAgICogQGZ1bmN0aW9uIF9zaG93U2xpZGVzXG4gICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX3Nob3dTbGlkZXMgKCkge1xuICAgICAgICAgICAgdmFyIF9ob2plID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiBfaG9qZS5nZXRUaW1lKCkgPj0gJHNjb3BlLnBhbGVzdHJhLmhvcmEgJiYgJHNjb3BlLnBhbGVzdHJhLnNsaWRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFicmUgYSB1cmwgZXh0ZXJuYSBubyBuYXZlZ2Fkb3IgbmF0aXZvXG4gICAgICAgICAqIEVzdGEgZnVuw6fDo28gZmF6IHVzbyBkbyBwbHVnaW4gSW5BcHBCcm93c2VyIGRvIGNvcmRvdmEgcGFyYSBhYnJpciBvcyBsaW5rcyBkYSBwYWxlc3RyYSBleHRlcm5hbWVudGUuXG4gICAgICAgICAqIFxuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfZ29Ub1VybFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gX3JlZGVcbiAgICAgICAgICogQHJldHVybnMge1N0cmluZ30gdXJsXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfZ29Ub1VybCAoX3JlZGUpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBfcmVkZS52YWxvcjtcblxuICAgICAgICAgICAgaWYgKF9yZWRlLnRpcG8gPT0gJ3NvY2lhbC10d2l0dGVyJylcbiAgICAgICAgICAgICAgICB1cmwgPSBcImh0dHA6Ly90d2l0dGVyLmNvbS9cIit1cmwucmVwbGFjZSgnQCcsJycpO1xuXG4gICAgICAgICAgICB3aW5kb3cub3Blbih1cmwsICdfc3lzdGVtJyk7XG4gICAgICAgIH1cblxuICAgIH1cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
