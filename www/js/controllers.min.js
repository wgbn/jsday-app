!function(){"use strict";function e(e,t,a){function o(e){return a.parseShortDateToStr(e)}function n(){e.palestras=t.getPalestras()}e.parseDateToStr=o,n()}angular.module("jsday").controller("HomeCtrl",e),e.$inject=["$scope","fireService","Utils"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,c,s,l){function u(){c.getLocalStorage(o.key)?(e.rate.avaliacao=c.getLocalStorage(o.key),s.show("Você já avaliou esta palestra.","bottom",!1,2500)):(e.palestra.avaliacao+=e.rate.avaliacao,i.updatePalestra(e.palestra,"avaliacao"),c.setLocalStorage(o.key,e.rate.avaliacao))}function m(){a.go("home")}function p(t,a){a.palestra==e.key&&d()}function d(){l.getByPalestra(e.key).then(function(t){e.notas=t})}function f(){var t=new Date;if(e.palestra.hora<=t.getTime()){n.show({template:'<input type="text" ng-model="comentario.nome" placeholder="Seu nome..." class="com-input"><input type="text" ng-model="comentario.email" placeholder="Seu e-mail..." class="com-input"><textarea ng-model="comentario.texto" placeholder="Comentário..." class="com-text"></textarea>',title:"Faça um comentário",subTitle:"Deixe aqui sua opinião sobre esta palestra",scope:e,buttons:[{text:"Cancelar"},{text:"<b>OK</b>",type:"button-energized",onTap:function(t){return e.comentario.nome&&e.comentario.email&&e.comentario.texto?(e.comentarios=i.addComentario(e.palestra,e.comentario),e.comentario={},!0):(t.preventDefault(),void s.show("Preencha todos os espaços.","bottom",!1,1500))}}]})}else s.show("Você só poderá comengar após o início da palestra.","bottom",!1,2500)}function g(a){r.show({destructiveText:"Excluir",titleText:"O que deseja fazer?",cancelText:"Cancel",cssClass:"sheets",cancel:function(){},buttonClicked:function(e){return!0},destructiveButtonClicked:function(){return l.remove(a).then(function(){t.$broadcast("notaAdded",{palestra:e.key})}),!0}})}function h(){var t=new Date;return t.getTime()>=e.palestra.hora&&e.palestra.slide}function v(e,t){return"social-twitter"==e?"http://twitter.com/"+t.replace("@",""):t}e.key=o.key,e.palestra=i.getPalestra(o.key),e.rate={},e.rate.avaliacao=c.getLocalStorage(o.key)?c.getLocalStorage(o.key):0,e.rate.max=5,e.notas=[],e.btnComentario=!1,e.comentario={},e.comentarios=i.getComentarios(e.palestra),e.showSlides=h(),e.rateClick=u,e.btnVoltar=m,e.addClick=f,e.onHoldNota=g,e.getUrl=v,e.$on("notaAdded",p),d()}angular.module("jsday").controller("PalestraCtrl",e),e.$inject=["$scope","$rootScope","$state","$stateParams","$ionicPopup","$ionicActionSheet","fireService","Utils","ionicToast","noteService"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvbWVDb250cm9sbGVyLmpzIiwicGFsZXN0cmFDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkhvbWVDdHJsIiwiJHNjb3BlIiwiZmlyZVNlcnZpY2UiLCJVdGlscyIsIl9wYXJzZURhdGVUb1N0ciIsIl9kYXRhIiwicGFyc2VTaG9ydERhdGVUb1N0ciIsIl9jYXJyZWdhUGFsZXN0cmFzIiwicGFsZXN0cmFzIiwiZ2V0UGFsZXN0cmFzIiwicGFyc2VEYXRlVG9TdHIiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRpbmplY3QiLCJQYWxlc3RyYUN0cmwiLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiJHN0YXRlUGFyYW1zIiwiJGlvbmljUG9wdXAiLCIkaW9uaWNBY3Rpb25TaGVldCIsImlvbmljVG9hc3QiLCJub3RlU2VydmljZSIsIl9yYXRlQ2xpY2siLCJnZXRMb2NhbFN0b3JhZ2UiLCJrZXkiLCJyYXRlIiwiYXZhbGlhY2FvIiwic2hvdyIsInBhbGVzdHJhIiwidXBkYXRlUGFsZXN0cmEiLCJzZXRMb2NhbFN0b3JhZ2UiLCJfYnRuVm9sdGFyIiwiZ28iLCJfbm90YUFkZGVkIiwiZSIsImRhdGEiLCJfZ2V0Tm90YXMiLCJnZXRCeVBhbGVzdHJhIiwidGhlbiIsInJlc3VsdHMiLCJub3RhcyIsIl9hZGRDbGljayIsIl9ob2plIiwiRGF0ZSIsImhvcmEiLCJnZXRUaW1lIiwidGVtcGxhdGUiLCJ0aXRsZSIsInN1YlRpdGxlIiwic2NvcGUiLCJidXR0b25zIiwidGV4dCIsInR5cGUiLCJvblRhcCIsImNvbWVudGFyaW8iLCJub21lIiwiZW1haWwiLCJ0ZXh0byIsImNvbWVudGFyaW9zIiwiYWRkQ29tZW50YXJpbyIsInByZXZlbnREZWZhdWx0IiwiX29uSG9sZE5vdGEiLCJfaWQiLCJkZXN0cnVjdGl2ZVRleHQiLCJ0aXRsZVRleHQiLCJjYW5jZWxUZXh0IiwiY3NzQ2xhc3MiLCJjYW5jZWwiLCJidXR0b25DbGlja2VkIiwiaW5kZXgiLCJkZXN0cnVjdGl2ZUJ1dHRvbkNsaWNrZWQiLCJyZW1vdmUiLCIkYnJvYWRjYXN0IiwiX3Nob3dTbGlkZXMiLCJzbGlkZSIsIl9nZXRVcmwiLCJfdGlwbyIsIl91cmwiLCJyZXBsYWNlIiwiZ2V0UGFsZXN0cmEiLCJtYXgiLCJidG5Db21lbnRhcmlvIiwiZ2V0Q29tZW50YXJpb3MiLCJzaG93U2xpZGVzIiwicmF0ZUNsaWNrIiwiYnRuVm9sdGFyIiwiYWRkQ2xpY2siLCJvbkhvbGROb3RhIiwiZ2V0VXJsIiwiJG9uIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBc0JBLFNBQUFBLEdBQUFDLEVBQUFDLEVBQUFDLEdBZUEsUUFBQUMsR0FBQUMsR0FDQSxNQUFBRixHQUFBRyxvQkFBQUQsR0FTQSxRQUFBRSxLQUNBTixFQUFBTyxVQUFBTixFQUFBTyxlQXpCQVIsRUFBQVMsZUFBQU4sRUFFQUcsSUFqQkFJLFFBQ0FDLE9BQUEsU0FDQUMsV0FBQSxXQUFBYixHQUVBQSxFQUFBYyxTQUFBLFNBQUEsY0FBQSxZQ2JBLFdBQ0EsWUFxQ0EsU0FBQUMsR0FBQWQsRUFBQWUsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQWxCLEVBQUFDLEVBQUFrQixFQUFBQyxHQThCQSxRQUFBQyxLQUNBcEIsRUFBQXFCLGdCQUFBTixFQUFBTyxNQUtBeEIsRUFBQXlCLEtBQUFDLFVBQUF4QixFQUFBcUIsZ0JBQUFOLEVBQUFPLEtBQ0FKLEVBQUFPLEtBQUEsaUNBQUEsVUFBQSxFQUFBLFFBTEEzQixFQUFBNEIsU0FBQUYsV0FBQTFCLEVBQUF5QixLQUFBQyxVQUNBekIsRUFBQTRCLGVBQUE3QixFQUFBNEIsU0FBQSxhQUNBMUIsRUFBQTRCLGdCQUFBYixFQUFBTyxJQUFBeEIsRUFBQXlCLEtBQUFDLFlBYUEsUUFBQUssS0FDQWYsRUFBQWdCLEdBQUEsUUFXQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUNBQSxFQUFBUCxVQUFBNUIsRUFBQXdCLEtBQ0FZLElBU0EsUUFBQUEsS0FDQWYsRUFBQWdCLGNBQUFyQyxFQUFBd0IsS0FBQWMsS0FBQSxTQUFBQyxHQUNBdkMsRUFBQXdDLE1BQUFELElBU0EsUUFBQUUsS0FDQSxHQUFBQyxHQUFBLEdBQUFDLEtBRUEsSUFBQTNDLEVBQUE0QixTQUFBZ0IsTUFBQUYsRUFBQUcsVUFFQSxDQUFBM0IsRUFBQVMsTUFDQW1CLFNBQUEsd1JBR0FDLE1BQUEscUJBQ0FDLFNBQUEsNkNBQ0FDLE1BQUFqRCxFQUNBa0QsVUFFQUMsS0FBQSxhQUdBQSxLQUFBLFlBQ0FDLEtBQUEsbUJBQ0FDLE1BQUEsU0FBQW5CLEdBQ0EsTUFBQWxDLEdBQUFzRCxXQUFBQyxNQUFBdkQsRUFBQXNELFdBQUFFLE9BQUF4RCxFQUFBc0QsV0FBQUcsT0FJQXpELEVBQUEwRCxZQUFBekQsRUFBQTBELGNBQUEzRCxFQUFBNEIsU0FBQTVCLEVBQUFzRCxZQUNBdEQsRUFBQXNELGVBQ0EsSUFMQXBCLEVBQUEwQixxQkFDQXhDLEdBQUFPLEtBQUEsNkJBQUEsVUFBQSxFQUFBLGdCQWtCQVAsR0FBQU8sS0FBQSxxREFBQSxVQUFBLEVBQUEsTUFTQSxRQUFBa0MsR0FBQUMsR0FDQTNDLEVBQUFRLE1BQ0FvQyxnQkFBQSxVQUNBQyxVQUFBLHNCQUNBQyxXQUFBLFNBQ0FDLFNBQUEsU0FDQUMsT0FBQSxhQUdBQyxjQUFBLFNBQUFDLEdBQ0EsT0FBQSxHQUVBQyx5QkFBQSxXQUtBLE1BSkFqRCxHQUFBa0QsT0FBQVQsR0FDQXhCLEtBQUEsV0FDQXZCLEVBQUF5RCxXQUFBLGFBQUE1QyxTQUFBNUIsRUFBQXdCLFNBRUEsS0FXQSxRQUFBaUQsS0FDQSxHQUFBL0IsR0FBQSxHQUFBQyxLQUNBLE9BQUFELEdBQUFHLFdBQUE3QyxFQUFBNEIsU0FBQWdCLE1BQUE1QyxFQUFBNEIsU0FBQThDLE1BV0EsUUFBQUMsR0FBQUMsRUFBQUMsR0FDQSxNQUFBLGtCQUFBRCxFQUNBLHNCQUFBQyxFQUFBQyxRQUFBLElBQUEsSUFDQUQsRUE1S0E3RSxFQUFBd0IsSUFBQVAsRUFBQU8sSUFDQXhCLEVBQUE0QixTQUFBM0IsRUFBQThFLFlBQUE5RCxFQUFBTyxLQUNBeEIsRUFBQXlCLFFBQ0F6QixFQUFBeUIsS0FBQUMsVUFBQXhCLEVBQUFxQixnQkFBQU4sRUFBQU8sS0FBQXRCLEVBQUFxQixnQkFBQU4sRUFBQU8sS0FBQSxFQUNBeEIsRUFBQXlCLEtBQUF1RCxJQUFBLEVBQ0FoRixFQUFBd0MsU0FDQXhDLEVBQUFpRixlQUFBLEVBQ0FqRixFQUFBc0QsY0FDQXRELEVBQUEwRCxZQUFBekQsRUFBQWlGLGVBQUFsRixFQUFBNEIsVUFDQTVCLEVBQUFtRixXQUFBVixJQUVBekUsRUFBQW9GLFVBQUE5RCxFQUNBdEIsRUFBQXFGLFVBQUF0RCxFQUNBL0IsRUFBQXNGLFNBQUE3QyxFQUNBekMsRUFBQXVGLFdBQUExQixFQUNBN0QsRUFBQXdGLE9BQUFiLEVBQ0EzRSxFQUFBeUYsSUFBQSxZQUFBeEQsR0FFQUcsSUFqREExQixRQUNBQyxPQUFBLFNBQ0FDLFdBQUEsZUFBQUUsR0FFQUEsRUFBQUQsU0FDQSxTQUNBLGFBQ0EsU0FDQSxlQUNBLGNBQ0Esb0JBQ0EsY0FDQSxRQUNBLGFBQ0EiLCJmaWxlIjoiY29udHJvbGxlcnMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBDb250cm9sbGVyIEhvbWVcbiAgICAgKiBAYXV0aG9yIFdhbHRlciBHYW5kYXJlbGxhIDx3YWx0ZXIud2dibkBnbWFpbC5jb20+XG4gICAgICogQG1lbWJlcm9mIGpzZGF5XG4gICAgICogQHZlcnNpb24gMS4wLjBcbiAgICAgKi9cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2pzZGF5JylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJywgSG9tZUN0cmwpO1xuXG4gICAgSG9tZUN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJ2ZpcmVTZXJ2aWNlJywgJ1V0aWxzJ107XG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YganNkYXlcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxuICAgICAqIEBuYW1lIEhvbWVDdHJsXG4gICAgICogQHBhcmFtICRzY29wZSB7c2VydmljZX0gICAgICAgICAgQ29udHJvbGxlciBzY29wZVxuICAgICAqIEBwYXJhbSBmaXJlU2VydmljZSB7ZmFjdG9yeX0gICAgIEZpcmViYXNlIHNlcnZpY2VcbiAgICAgKiBAcGFyYW0gVXRpbHMge2ZhY3Rvcnl9ICAgICAgICAgICBGdW7Dp8O1ZXMgdXRpbGl0w6FyaWFzXG4gICAgICovXG4gICAgZnVuY3Rpb24gSG9tZUN0cmwoJHNjb3BlLCBmaXJlU2VydmljZSwgVXRpbHMpIHtcbiAgICAgICAgJHNjb3BlLnBhcnNlRGF0ZVRvU3RyID0gX3BhcnNlRGF0ZVRvU3RyO1xuXG4gICAgICAgIF9jYXJyZWdhUGFsZXN0cmFzKCk7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICAvKipcbiAgICAgICAgICogRnVuw6fDo28gcXVlIGNvbnZlcnRlIHVtYSBkYXRhXG4gICAgICAgICAqIEBtZW1iZXJvZiBIb21lQ3RybFxuICAgICAgICAgKiBAZnVuY3Rpb24gX3BhcnNlRGF0ZVRvU3RyXG4gICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBfZGF0YSAgICAgICAgVGltZXN0YW1wIGRhIGRhdGEgYSBzZXIgcmVzb2x2aWRhXG4gICAgICAgICAqIEByZXR1cm5zIHtTdHJpbmd9ICAgICAgICAgICAgRGF0YSBwYXJzZWFkYVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX3BhcnNlRGF0ZVRvU3RyIChfZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIFV0aWxzLnBhcnNlU2hvcnREYXRlVG9TdHIoX2RhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZ1bsOnw6NvIHF1ZSBjYXJyZWdhIGEgbGlzdGEgZGUgcGFsZXN0cmFzIGEgcGFydGlyIGRvIHNlcnZpY2UgRmlyZWJhc2VcbiAgICAgICAgICogQG1lbWJlcm9mIEhvbWVDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfY2FycmVnYVBhbGVzdHJhc1xuICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gICAgICAgICAgIFByb21pc2UgZGEgbGlzdGEgZGUgcGFsZXN0cmFzXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfY2FycmVnYVBhbGVzdHJhcyAoKSB7XG4gICAgICAgICAgICAkc2NvcGUucGFsZXN0cmFzID0gZmlyZVNlcnZpY2UuZ2V0UGFsZXN0cmFzKCk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gQ29udHJvbGxlciBQYWxlc3RyYVxuICAgICAqIEBhdXRob3IgV2FsdGVyIEdhbmRhcmVsbGEgPHdhbHRlci53Z2JuQGdtYWlsLmNvbT5cbiAgICAgKiBAbWVtYmVyb2YganNkYXlcbiAgICAgKiBAdmVyc2lvbiAxLjAuMFxuICAgICAqL1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnanNkYXknKVxuICAgICAgICAuY29udHJvbGxlcignUGFsZXN0cmFDdHJsJywgUGFsZXN0cmFDdHJsKTtcblxuICAgIFBhbGVzdHJhQ3RybC4kaW5qZWN0ID0gW1xuICAgICAgICAnJHNjb3BlJyxcbiAgICAgICAgJyRyb290U2NvcGUnLFxuICAgICAgICAnJHN0YXRlJyxcbiAgICAgICAgJyRzdGF0ZVBhcmFtcycsXG4gICAgICAgICckaW9uaWNQb3B1cCcsXG4gICAgICAgICckaW9uaWNBY3Rpb25TaGVldCcsXG4gICAgICAgICdmaXJlU2VydmljZScsXG4gICAgICAgICdVdGlscycsXG4gICAgICAgICdpb25pY1RvYXN0JyxcbiAgICAgICAgJ25vdGVTZXJ2aWNlJ1xuICAgIF07XG5cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyb2YganNkYXlcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxuICAgICAqIEBuYW1lIFBhbGVzdHJhQ3RybFxuICAgICAqIEBwYXJhbSAkc2NvcGUge3NlcnZpY2V9ICAgICAgICAgIENvbnRyb2xsZXIgc2NvcGVcbiAgICAgKiBAcGFyYW0gJHN0YXRlIHtwcm92aWRlcn0gICAgICAgICBTdGF0ZSBwcm92aWRlclxuICAgICAqIEBwYXJhbSAkc3RhdGVQYXJhbXMge3Byb3ZpZGVyfSAgIFN0YXRlIHBhcmFtc1xuICAgICAqIEBwYXJhbSBmaXJlU2VydmljZSB7ZmFjdG9yeX0gICAgIEZpcmViYXNlIHNlcnZpY2VcbiAgICAgKiBAcGFyYW0gVXRpbHMge2ZhY3Rvcnl9ICAgICAgICAgICBGdW7Dp8O1ZXMgdXRpbGl0w6FyaWFzXG4gICAgICogQHBhcmFtIGlvbmljVG9hc3Qge3Byb3ZpZGVyfSAgICAgVG9hc3QgcHJvdmlkZXJcbiAgICAgKiBAcGFyYW0gbm90ZVNlcnZpY2Uge3NlcnZpY2V9ICAgICBTZXJ2acOnbyBkZSBwZXJzaXN0ZW5jaWEgZGUgbm90YXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQYWxlc3RyYUN0cmwoJHNjb3BlLCAkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgJGlvbmljUG9wdXAsICRpb25pY0FjdGlvblNoZWV0LCBmaXJlU2VydmljZSwgVXRpbHMsIGlvbmljVG9hc3QsIG5vdGVTZXJ2aWNlKSB7XG5cbiAgICAgICAgJHNjb3BlLmtleSA9ICRzdGF0ZVBhcmFtcy5rZXk7XG4gICAgICAgICRzY29wZS5wYWxlc3RyYSA9IGZpcmVTZXJ2aWNlLmdldFBhbGVzdHJhKCRzdGF0ZVBhcmFtcy5rZXkpO1xuICAgICAgICAkc2NvcGUucmF0ZSA9IHt9O1xuICAgICAgICAkc2NvcGUucmF0ZS5hdmFsaWFjYW8gPSBVdGlscy5nZXRMb2NhbFN0b3JhZ2UoJHN0YXRlUGFyYW1zLmtleSkgPyBVdGlscy5nZXRMb2NhbFN0b3JhZ2UoJHN0YXRlUGFyYW1zLmtleSkgOiAwO1xuICAgICAgICAkc2NvcGUucmF0ZS5tYXggPSA1O1xuICAgICAgICAkc2NvcGUubm90YXMgPSBbXTtcbiAgICAgICAgJHNjb3BlLmJ0bkNvbWVudGFyaW8gPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmNvbWVudGFyaW8gPSB7fTtcbiAgICAgICAgJHNjb3BlLmNvbWVudGFyaW9zID0gZmlyZVNlcnZpY2UuZ2V0Q29tZW50YXJpb3MoJHNjb3BlLnBhbGVzdHJhKTtcbiAgICAgICAgJHNjb3BlLnNob3dTbGlkZXMgPSBfc2hvd1NsaWRlcygpO1xuXG4gICAgICAgICRzY29wZS5yYXRlQ2xpY2sgPSBfcmF0ZUNsaWNrO1xuICAgICAgICAkc2NvcGUuYnRuVm9sdGFyID0gX2J0blZvbHRhcjtcbiAgICAgICAgJHNjb3BlLmFkZENsaWNrID0gX2FkZENsaWNrO1xuICAgICAgICAkc2NvcGUub25Ib2xkTm90YSA9IF9vbkhvbGROb3RhO1xuICAgICAgICAkc2NvcGUuZ2V0VXJsID0gX2dldFVybDtcbiAgICAgICAgJHNjb3BlLiRvbignbm90YUFkZGVkJywgX25vdGFBZGRlZCk7XG5cbiAgICAgICAgX2dldE5vdGFzKCk7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICAvKipcbiAgICAgICAgICogRnVuw6fDo28gcXVlIGNhcHR1cmEgbyBjbGlxdWUgbmEgZGlyZXRpdmEgZGUgYXZhbGlhw6fDo28gZSBzYWx2YSBvIHZvdG8gZG8gdXN1w6FyaW9cbiAgICAgICAgICogQG1lbWJlcm9mIFBhbGVzdHJhQ3RybFxuICAgICAgICAgKiBAZnVuY3Rpb24gX3JhdGVDbGlja1xuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX3JhdGVDbGljayAoKSB7XG4gICAgICAgICAgICBpZiAoIVV0aWxzLmdldExvY2FsU3RvcmFnZSgkc3RhdGVQYXJhbXMua2V5KSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5wYWxlc3RyYS5hdmFsaWFjYW8gKz0gJHNjb3BlLnJhdGUuYXZhbGlhY2FvO1xuICAgICAgICAgICAgICAgIGZpcmVTZXJ2aWNlLnVwZGF0ZVBhbGVzdHJhKCRzY29wZS5wYWxlc3RyYSwgJ2F2YWxpYWNhbycpO1xuICAgICAgICAgICAgICAgIFV0aWxzLnNldExvY2FsU3RvcmFnZSgkc3RhdGVQYXJhbXMua2V5LCAkc2NvcGUucmF0ZS5hdmFsaWFjYW8pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmF0ZS5hdmFsaWFjYW8gPSBVdGlscy5nZXRMb2NhbFN0b3JhZ2UoJHN0YXRlUGFyYW1zLmtleSk7XG4gICAgICAgICAgICAgICAgaW9uaWNUb2FzdC5zaG93KCdWb2PDqiBqw6EgYXZhbGlvdSBlc3RhIHBhbGVzdHJhLicsICdib3R0b20nLCBmYWxzZSwgMjUwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRnVuw6fDo28gcXVlIGNhcHR1cmEgbyBib3TDo28gdm9sdGFyIGUgZGlyZWNpb25hIHBhcmEgdGVsYSBIb21lXG4gICAgICAgICAqIEBtZW1iZXJvZiBQYWxlc3RyYUN0cmxcbiAgICAgICAgICogQGZ1bmN0aW9uIF9idG5Wb2x0YXJcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9idG5Wb2x0YXIgKCkge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRnVuw6fDo28gcXVlIGVzY3V0YSBvIGV2ZW50byBub3RhQWRkZWQgZSBhdHVhbGl6YSBhcyBub3RhcyBuYSB0ZWxhXG4gICAgICAgICAqIEBtZW1iZXJvZiBQYWxlc3RyYUN0cmxcbiAgICAgICAgICogQGZ1bmN0aW9uIF9ub3RhQWRkZWRcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGUgICAgICAgIEV2ZW50IG9iamVjdFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAgICAgRGF0YSByZXN1bHQgb2JqZWN0XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfbm90YUFkZGVkIChlLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5wYWxlc3RyYSA9PSAkc2NvcGUua2V5KVxuICAgICAgICAgICAgICAgIF9nZXROb3RhcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZ1bsOnw6NvIHF1ZSBjb25zdWx0YSBvIHNlcnZpY2UgZGUgTm90YXMgZSBhdHVhbGl6YSBhIGxpc3RhIGRlIG5vdGFzXG4gICAgICAgICAqIEBtZW1iZXJvZiBQYWxlc3RyYUN0cmxcbiAgICAgICAgICogQGZ1bmN0aW9uIGdldE5vdGFzXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfZ2V0Tm90YXMoKSB7XG4gICAgICAgICAgICBub3RlU2VydmljZS5nZXRCeVBhbGVzdHJhKCRzY29wZS5rZXkpLnRoZW4oZnVuY3Rpb24ocmVzdWx0cykge1xuICAgICAgICAgICAgICAgICRzY29wZS5ub3RhcyA9IHJlc3VsdHM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCb3TDo28gcXVlIGFkaWNpb25hIHVtIGNvbWVudMOhcmlvIMOgIHBhbGVzdHJhXG4gICAgICAgICAqIEBtZW1iZXJvZiBQYWxlc3RyYUN0cmxcbiAgICAgICAgICogQGZ1bmN0aW9uIF9hZGRDbGlja1xuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX2FkZENsaWNrICgpIHtcbiAgICAgICAgICAgIHZhciBfaG9qZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgICAgIGlmICgkc2NvcGUucGFsZXN0cmEuaG9yYSA8PSBfaG9qZS5nZXRUaW1lKCkpe1xuXG4gICAgICAgICAgICAgICAgdmFyIGNvbVBvcHVwID0gJGlvbmljUG9wdXAuc2hvdyh7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJjb21lbnRhcmlvLm5vbWVcIiBwbGFjZWhvbGRlcj1cIlNldSBub21lLi4uXCIgY2xhc3M9XCJjb20taW5wdXRcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiY29tZW50YXJpby5lbWFpbFwiIHBsYWNlaG9sZGVyPVwiU2V1IGUtbWFpbC4uLlwiIGNsYXNzPVwiY29tLWlucHV0XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICc8dGV4dGFyZWEgbmctbW9kZWw9XCJjb21lbnRhcmlvLnRleHRvXCIgcGxhY2Vob2xkZXI9XCJDb21lbnTDoXJpby4uLlwiIGNsYXNzPVwiY29tLXRleHRcIj48L3RleHRhcmVhPicsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRmHDp2EgdW0gY29tZW50w6FyaW8nLFxuICAgICAgICAgICAgICAgICAgICBzdWJUaXRsZTogJ0RlaXhlIGFxdWkgc3VhIG9waW5pw6NvIHNvYnJlIGVzdGEgcGFsZXN0cmEnLFxuICAgICAgICAgICAgICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICAgICAgICAgICAgICBidXR0b25zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0NhbmNlbGFyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnPGI+T0s8L2I+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYnV0dG9uLWVuZXJnaXplZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25UYXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuY29tZW50YXJpby5ub21lIHx8ICEkc2NvcGUuY29tZW50YXJpby5lbWFpbCB8fCAhJHNjb3BlLmNvbWVudGFyaW8udGV4dG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlvbmljVG9hc3Quc2hvdygnUHJlZW5jaGEgdG9kb3Mgb3MgZXNwYcOnb3MuJywgJ2JvdHRvbScsIGZhbHNlLCAxNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jb21lbnRhcmlvcyA9IGZpcmVTZXJ2aWNlLmFkZENvbWVudGFyaW8oJHNjb3BlLnBhbGVzdHJhLCAkc2NvcGUuY29tZW50YXJpbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY29tZW50YXJpbyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8qY29tUG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNvbWVudGFyaW9zID0gZmlyZVNlcnZpY2UuYWRkQ29tZW50YXJpbygkc2NvcGUucGFsZXN0cmEsIHJlcyk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ2NhbmNlbCcpO1xuICAgICAgICAgICAgICAgIH0pOyovXG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW9uaWNUb2FzdC5zaG93KCdWb2PDqiBzw7MgcG9kZXLDoSBjb21lbmdhciBhcMOzcyBvIGluw61jaW8gZGEgcGFsZXN0cmEuJywgJ2JvdHRvbScsIGZhbHNlLCAyNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBw6fDo28gZXhlY3V0YWRhIGFvIHNlZ3VyYXIgZW0gY2ltYSBkZSB1bWEgbm90YVxuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfb25Ib2xkTm90YVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX29uSG9sZE5vdGEgKF9pZCkge1xuICAgICAgICAgICAgdmFyIGhpZGVTaGVldCA9ICRpb25pY0FjdGlvblNoZWV0LnNob3coe1xuICAgICAgICAgICAgICAgIGRlc3RydWN0aXZlVGV4dDogJ0V4Y2x1aXInLFxuICAgICAgICAgICAgICAgIHRpdGxlVGV4dDogJ08gcXVlIGRlc2VqYSBmYXplcj8nLFxuICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ6ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgIGNzc0NsYXNzOiAnc2hlZXRzJyxcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgY2FuY2VsIGNvZGUuLlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnV0dG9uQ2xpY2tlZDogZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZXN0cnVjdGl2ZUJ1dHRvbkNsaWNrZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbm90ZVNlcnZpY2UucmVtb3ZlKF9pZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ25vdGFBZGRlZCcsIHtwYWxlc3RyYTogJHNjb3BlLmtleX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZlcmlmaWNhIHNlIG8gYm90w6NvIGRlIHNsaWRlcyBwb2RlIHNlciBleGliaWRvXG4gICAgICAgICAqIEBtZW1iZXJvZiBQYWxlc3RyYUN0cmxcbiAgICAgICAgICogQGZ1bmN0aW9uIF9zaG93U2xpZGVzXG4gICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX3Nob3dTbGlkZXMgKCkge1xuICAgICAgICAgICAgdmFyIF9ob2plID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiBfaG9qZS5nZXRUaW1lKCkgPj0gJHNjb3BlLnBhbGVzdHJhLmhvcmEgJiYgJHNjb3BlLnBhbGVzdHJhLnNsaWRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyYW5zZm9ybWEgYSB1cmwgYSBzZXIgZXhpYmlkYVxuICAgICAgICAgKiBAbWVtYmVyb2YgUGFsZXN0cmFDdHJsXG4gICAgICAgICAqIEBmdW5jdGlvbiBfZ2V0VXJsXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBfdGlwb1xuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gX3VybFxuICAgICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSB1cmxcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9nZXRVcmwgKF90aXBvLCBfdXJsKSB7XG4gICAgICAgICAgICBpZiAoX3RpcG8gPT0gJ3NvY2lhbC10d2l0dGVyJylcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJodHRwOi8vdHdpdHRlci5jb20vXCIrX3VybC5yZXBsYWNlKCdAJywnJyk7XG4gICAgICAgICAgICByZXR1cm4gX3VybDtcbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
